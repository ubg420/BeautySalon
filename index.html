<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
	<title>BeautySalon</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	
	<!-- Made with Construct, the game and app creator :: https://www.construct.net -->
	<meta name="generator" content="Scirra Construct">



	<link rel="manifest" href="appmanifest.json">


	<link rel="stylesheet" href="style.css">


<script src="poki-sdk.js"></script>
<link rel="preload" href="bgimg.webp" as="image">

    <style>
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #6ccbff;
        }

        #custom-loader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #6ccbff;
            z-index: 1000;
            transition: opacity 0.5s;
            opacity: 1;
            background-image: url('bgimg.webp'), url('bgimg1.webp');
            background-size: cover, cover;
            background-repeat: repeat, repeat;
            background-position: center, center;
        }

        @media (min-aspect-ratio: 1/1) {
            #custom-loader {
                background-size: auto 100%, auto 100%;
            }
        }

        @media (max-aspect-ratio: 1/1) {
            #custom-loader {
                background-size: cover 100%, cover 100%;
            }
        }

        .loading-bar-container {
            position: absolute;
            width: 70%;
            height: 32px;
            bottom: 80px;
            left: 15%;
            border: solid 0.2em #E97E04;
            border-radius: 10em;
            background: #FFCB8F;
			user-select: none;
        }

        .loading-bar {
            height: 32px;
            width: 0%;
            background: linear-gradient(to top, #F6A200, #F6C300);
            border-radius: 10em;
            transition: width 0.1s ease-in-out; /* Плавное изменение ширины */
			user-select: none;
        }

        .fade-out {
            opacity: 1;
            transition: opacity 0.2s ease-in-out;
        }

        .progress-text-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
			user-select: none;
        }

        #progress-text {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            margin-bottom: 64px;
			user-select: none;
        }

        #loading-img {
            position: absolute;
            bottom: 15px;
            left: calc(50% - 25px);
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
			user-select: none;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
<body>
    <div id="custom-loader">
        <div class="loading-bar-container">
            <div class="loading-bar" id="loading-bar"></div>
            <div class="progress-text-container">
                <div id="progress-text">0%</div>
            </div>
        </div>
        <img src="loading.png" id="loading-img">
    </div>

    <script>
		let sstart = 0; 
		let counter = 0; 
		let prog = 0;
		let max_prog = 0;
		let start_load = 0;
		let full_load = 0;
		let poki_init = false;
		createFallingObject(-999,-999);
document.addEventListener("click", (event) => {
	if (full_load == 0) {
	    createFallingObject(Math.random() * window.innerWidth, window.innerHeight + 45);
	}
});

function createFallingObject(x, y) {
    const object = new Image();
    object.src = "particle.webp";  
    object.style.position = "absolute";
	let size = Math.random() * 60 + 30 + "px";
	object.style.width  = size;  
	object.style.height = size; 
    object.style.left = `${x - 30}px`;   
    object.style.top = `${y}px`;
    object.style.zIndex = "1000";
	object.style.userSelect = "none";

    // Случайный угол от -15 до 15 градусов
    const randomAngle = Math.random() * 30 - 15; 
    object.style.transform = `rotate(${randomAngle}deg)`;

    // Добавление объекта на страницу
    document.body.appendChild(object);

    // Случайное смещение по X
    const randomOffsetX = Math.random() * 200 - 100;

    // Случайное время жизни и скорость
    const randomDuration = Math.random() * 2 + 2;  // от 2 до 5 секунд
    const randomLifetime = Math.random() * 2000 + randomDuration * 1000; // от 2 до 7 секунд
	const randomY = Math.random() * 1000;  

    // Генерация уникального ключевого кадра
    const animationName = `move${Math.random().toString(36).substr(2, 9)}`;

    // Создание анимации
    const styleSheet = document.styleSheets[0];
    styleSheet.insertRule(`
        @keyframes ${animationName} {
            0% {
                top: ${y}px;
                left: ${x - 30}px;
                opacity: 1;
            }
            50% {
                left: ${x - 30 + randomOffsetX / 2}px;
            }
            100% {
                top: ${y - randomY}px;
                left: ${x - 30 + randomOffsetX}px;
                opacity: 0;
            }
        }
    `, styleSheet.cssRules.length);

    // Запуск анимации с случайной скоростью
    object.style.animation = `${animationName} ${randomDuration}s ease-in-out forwards`;

    // Удаление объекта после завершения анимации
    setTimeout(() => {
        object.remove();
    }, randomLifetime); 
}




        window.addEventListener('keydown', ev => {
            if (['ArrowDown', 'ArrowUp', ' '].includes(ev.key)) {
                ev.preventDefault();
            }
        });
        window.addEventListener('wheel', ev => ev.preventDefault(), { passive: false });
		
		
		const intervalId = setInterval(() => {
			if (counter < 6) {
				counter += 1; 
				updateProgress(Math.floor(prog * 85) + start_load + counter);
			} else {
				clearInterval(intervalId); 
		}
	}, 2000); 

        function load_prog(numb) {
            prog = numb;
			if (prog !== 1 || full_load === 1) { 
				updateProgress(Math.floor(prog * 85) + start_load + counter);
			}
			
			if (poki_init && sstart == 0 && numb >= 1) {
			 	sstart = 1
				c3_callFunction("start");
			}
        }

        function updateProgress(percent) {
			if (prog !== 1 || full_load === 1) { 
				if (percent > max_prog) {max_prog = percent}
				const progressBar = document.getElementById('loading-bar');
				const progressText = document.getElementById('progress-text');
				progressText.innerText = max_prog + '%';
				progressBar.style.width = max_prog + '%'; 
			}
        }

	function onGameLoaded() {
			max_prog = 100;
			full_load = 1;
			updateProgress(Math.floor(100));
            var customLoader = document.getElementById('custom-loader');
            customLoader.style.opacity = '0';
			poki_gameLoadingFinished()
            setTimeout(() => {
                customLoader.style.display = 'none';
            }, 500);
     }
	 


		PokiSDK.init().then(() => {
			poki_init = true;
		}).catch(() => {
			poki_init = true;
		});

		function poki_gameLoadingFinished() {
			if (poki_init) {
				PokiSDK.gameLoadingFinished();
			} else {
				const checkInitInterval = setInterval(function() {
					if (poki_init) {
						clearInterval(checkInitInterval);
						PokiSDK.gameLoadingFinished();
					}
				}, 100); 
			}
		}
		
	function poki_gameplayStart() {
		PokiSDK.gameplayStart();
	}

	function poki_gameplayStop() {
		PokiSDK.gameplayStop();
	}
	
	function poki_rewardedBreak(adtype, runtime) {
		c3_callFunction("pokiRewardedBreak", ["start"]);
		PokiSDK.rewardedBreak({
			size: adtype
		}).then((success) => {
			if (success) {
				c3_callFunction("pokiRewardedBreak", ["get"]);
			} else {
				c3_callFunction("pokiRewardedBreak", ["error"]);
			}
			c3_callFunction("pokiRewardedBreak", ["finish"]);
		}).catch((error) => {
			c3_callFunction("pokiRewardedBreak", ["error"]);
		});
	}

	
	function poki_commercialBreak(runtime) {
		
		PokiSDK.commercialBreak(() => {
		  c3_callFunction("pokiCommercialBreak", ["start"]);
		}).then(() => {
		  c3_callFunction("pokiCommercialBreak", ["finish"]);
		});
	}

        async function loadExternalResources() {
            try {
                await Promise.all([
                    fetch('scripts/main.js').then(response => {
                        if (response.ok) {
                            start_load += 3;
                			updateProgress(Math.floor(prog * 85) + start_load + counter);
                        }
                    }),
                    fetch('data.json').then(response => {
                        if (response.ok) {
                            start_load += 2;
                			updateProgress(Math.floor(prog * 85) + start_load + counter);
                        }
                    }),
                    fetch('scripts/c3main.js').then(response => {
                        if (response.ok) {
                            start_load += 4;
                			updateProgress(Math.floor(prog * 85) + start_load + counter);
                        }
                    })
                ]);
            } catch (error) {
                console.error(error);
            }
        }

        loadExternalResources();
    </script>
</body>
</head> 
 
<body>

	

<script>
if (location.protocol.substr(0, 4) === "file")
{
	alert("Web exports won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");
}
</script>
	
	<noscript>
		<div id="notSupportedWrap">
			<h2 id="notSupportedTitle">This content requires JavaScript</h2>
			<p class="notSupportedMessage">JavaScript appears to be disabled. Please enable it to view this content.</p>
		</div>
	</noscript>
	<script src="scripts/modernjscheck.js"></script>
	<script src="scripts/supportcheck.js"></script>
	<script src="scripts/main.js" type="module"></script>


</body> 
</html>