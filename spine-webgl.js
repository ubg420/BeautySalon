var spine=(()=>{var t=Object.defineProperty,e={};((e,s)=>{for(var i in(e=>{t(e,"__esModule",{value:!0})})(e),s)t(e,i,{get:s[i],enumerable:!0})})(e,{AlphaTimeline:()=>mt,Animation:()=>Y,AnimationState:()=>Yt,AnimationStateAdapter:()=>Ot,AnimationStateData:()=>_t,AssetManager:()=>Rs,AssetManagerBase:()=>ye,AtlasAttachmentLoader:()=>ce,Attachment:()=>w,AttachmentTimeline:()=>pt,BinaryInput:()=>We,BlendMode:()=>Ee,Bone:()=>we,BoneData:()=>de,BoundingBoxAttachment:()=>Ht,CURRENT:()=>jt,CameraController:()=>ei,ClippingAttachment:()=>Zt,Color:()=>n,Color2Attribute:()=>ui,ColorAttribute:()=>di,ConstraintData:()=>be,CurveTimeline:()=>Q,CurveTimeline1:()=>$,CurveTimeline2:()=>tt,DebugUtils:()=>m,DeformTimeline:()=>xt,Downloader:()=>ve,DrawOrderTimeline:()=>vt,Event:()=>Ae,EventData:()=>Se,EventQueue:()=>Lt,EventTimeline:()=>bt,EventType:()=>Ft,FIRST:()=>Ut,FakeTexture:()=>Qt,GLTexture:()=>Fs,HOLD_FIRST:()=>zt,HOLD_MIX:()=>qt,HOLD_SUBSEQUENT:()=>Wt,IkConstraint:()=>Ie,IkConstraintData:()=>Ce,IkConstraintTimeline:()=>At,Input:()=>$s,IntSet:()=>s,Interpolation:()=>h,LoadingScreen:()=>Ri,M00:()=>Ls,M01:()=>Bs,M02:()=>Ps,M03:()=>Vs,M10:()=>Ds,M11:()=>Os,M12:()=>Ns,M13:()=>Us,M20:()=>Ws,M21:()=>zs,M22:()=>qs,M23:()=>Gs,M30:()=>js,M31:()=>_s,M32:()=>Hs,M33:()=>Zs,ManagedWebGLRenderingContext:()=>Ms,MathUtils:()=>o,Matrix4:()=>Js,Mesh:()=>ai,MeshAttachment:()=>ie,MixBlend:()=>C,MixDirection:()=>M,OrthoCamera:()=>Qs,PathAttachment:()=>re,PathConstraint:()=>ke,PathConstraintData:()=>Te,PathConstraintMixTimeline:()=>Tt,PathConstraintPositionTimeline:()=>It,PathConstraintSpacingTimeline:()=>Ct,PointAttachment:()=>ne,PolygonBatcher:()=>fi,Pool:()=>g,Position2Attribute:()=>hi,Position3Attribute:()=>li,PositionMode:()=>ue,Pow:()=>l,PowOut:()=>c,RGB2Timeline:()=>ft,RGBA2Timeline:()=>gt,RGBATimeline:()=>dt,RGBTimeline:()=>ut,RegionAttachment:()=>oe,ResizeMode:()=>Ai,RotateMode:()=>pe,RotateTimeline:()=>et,SETUP:()=>Gt,SUBSEQUENT:()=>Nt,ScaleTimeline:()=>nt,ScaleXTimeline:()=>at,ScaleYTimeline:()=>ot,SceneRenderer:()=>Ei,SequenceTimeline:()=>kt,Shader:()=>ii,ShapeRenderer:()=>pi,ShapeType:()=>mi,ShearTimeline:()=>ht,ShearXTimeline:()=>lt,ShearYTimeline:()=>ct,Skeleton:()=>Xe,SkeletonBinary:()=>Ue,SkeletonBounds:()=>ws,SkeletonClipping:()=>ys,SkeletonData:()=>Le,SkeletonDebugRenderer:()=>wi,SkeletonJson:()=>vs,SkeletonRenderer:()=>vi,Skin:()=>Pe,SkinEntry:()=>Be,Slot:()=>Fe,SlotData:()=>Ve,SpacingMode:()=>ge,SpineCanvas:()=>Bi,StringSet:()=>i,TexCoordAttribute:()=>ci,Texture:()=>Kt,TextureAtlas:()=>$t,TextureAtlasPage:()=>ee,TextureAtlasRegion:()=>se,TextureFilter:()=>Bt,TextureRegion:()=>Jt,TextureWrap:()=>Vt,TimeKeeper:()=>p,Timeline:()=>J,Touch:()=>ti,TrackEntry:()=>Xt,TransformConstraint:()=>Re,TransformConstraintData:()=>Ne,TransformConstraintTimeline:()=>St,TransformMode:()=>he,TranslateTimeline:()=>st,TranslateXTimeline:()=>it,TranslateYTimeline:()=>rt,Triangulator:()=>bs,Utils:()=>u,Vector2:()=>f,Vector3:()=>Xs,VertexAttachment:()=>y,VertexAttribute:()=>oi,VertexAttributeType:()=>ri,WebGLBlendModeConverter:()=>Es,WindowedMean:()=>x});var s=class{constructor(){this.array=new Array}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},i=class{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var s=0,i=t.length;s<i;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},r=class{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new r).setFromString(t)}},n=r;n.WHITE=new r(1,1,1,1),n.RED=new r(1,0,0,1),n.GREEN=new r(0,1,0,1),n.BLUE=new r(0,0,1,1),n.MAGENTA=new r(1,0,1,1);var a=class{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*a.degRad)}static sinDeg(t){return Math.sin(t*a.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return a.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){let i=Math.random(),r=e-t;return i<=(s-t)/r?t+Math.sqrt(i*r*(s-t)):e-Math.sqrt((1-i)*r*(e-s))}static isPowerOfTwo(t){return t&&!(t&t-1)}},o=a;o.PI=3.1415927,o.PI2=2*a.PI,o.radiansToDegrees=180/a.PI,o.radDeg=a.radiansToDegrees,o.degreesToRadians=a.PI/180,o.degRad=a.degreesToRadians;var h=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},l=class extends h{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},c=class extends l{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},d=class{static arrayCopy(t,e,s,i,r){for(let n=e,a=i;n<e+r;n++,a++)s[a]=t[n]}static arrayFill(t,e,s,i){for(let r=e;r<s;r++)t[r]=i}static setArraySize(t,e,s=0){let i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let r=i;r<e;r++)t[r]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:d.setArraySize(t,e,s)}static newArray(t,e){let s=new Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(d.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(d.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return d.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return d.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},u=d;u.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var m=class{static logBones(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}},g=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},f=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},p=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},x=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},w=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},b=class extends w{constructor(t){super(t),this.id=b.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,s,i,r,n){s=r+(s>>1)*n;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);let a=t.bone,l=a.worldX,c=a.worldY,d=a.a,u=a.b,m=a.c,g=a.d;for(let t=e,a=r;a<s;t+=2,a+=n){let e=h[t],s=h[t+1];i[a]=e*d+s*u+l,i[a+1]=e*m+s*g+c}return}let c=0,d=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,d+=t}let u=a.bones;if(0==o.length)for(let t=r,e=3*d;t<s;t+=n){let s=0,r=0,n=l[c++];for(n+=c;c<n;c++,e+=3){let t=u[l[c]],i=h[e],n=h[e+1],a=h[e+2];s+=(i*t.a+n*t.b+t.worldX)*a,r+=(i*t.c+n*t.d+t.worldY)*a}i[t]=s,i[t+1]=r}else{let t=o;for(let e=r,a=3*d,o=d<<1;e<s;e+=n){let s=0,r=0,n=l[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=u[l[c]],i=h[a]+t[o],n=h[a+1]+t[o+1],d=h[a+2];s+=(i*e.a+n*e.b+e.worldX)*d,r+=(i*e.c+n*e.d+e.worldY)*d}i[e]=s,i[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),u.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=u.newFloatArray(this.vertices.length),u.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},y=b;y.nextID=0;var v,A,S=class{constructor(t){this.id=S.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){let t=new S(this.regions.length);return u.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);let i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+=i,s}static nextID(){return S._nextID++}},I=S;I._nextID=0,(A=v||(v={}))[A.hold=0]="hold",A[A.once=1]="once",A[A.loop=2]="loop",A[A.pingpong=3]="pingpong",A[A.onceReverse=4]="onceReverse",A[A.loopReverse=5]="loopReverse",A[A.pingpongReverse=6]="pingpongReverse";var C,T,M,k,E=[0,1,2,3,4,5,6],Y=class{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new i,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,r,n,a,o){if(!t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let i=0,l=h.length;i<l;i++)h[i].apply(t,e,s,r,n,a,o)}};(T=C||(C={}))[T.setup=0]="setup",T[T.first=1]="first",T[T.replace=2]="replace",T[T.add=3]="add",(k=M||(M={}))[k.mixIn=0]="mixIn",k[k.mixOut=1]="mixOut";var F=0,R=1,X=2,L=3,B=4,P=5,V=6,D=7,O=8,N=9,U=10,W=11,z=12,q=13,G=14,j=15,_=16,H=17,Z=18,K=19,J=class{constructor(t,e){this.propertyIds=e,this.frames=u.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){let i=t.length;for(let r=s;r<i;r+=s)if(t[r]>e)return r-s;return i-s}},Q=class extends J{constructor(t,e,s){super(t,s),this.curves=u.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=u.newFloatArray(e);u.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,r,n,a,o,h,l,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=.03*(i-2*n+o),g=.03*(r-2*a+h),f=.006*(3*(n-o)-i+l),p=.006*(3*(a-h)-r+c),x=2*m+f,w=2*g+p,b=.3*(n-i)+m+.16666667*f,y=.3*(a-r)+g+.16666667*p,v=i+b,A=r+y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=A,b+=x,y+=w,x+=f,w+=p,v+=b,A+=y}getBezierValue(t,e,s,i){let r=this.curves;if(r[i]>t){let n=this.frames[e],a=this.frames[e+s];return a+(t-n)/(r[i]-n)*(r[i+1]-a)}let n=i+18;for(i+=2;i<n;i+=2)if(r[i]>=t){let e=r[i-2],s=r[i-1];return s+(t-e)/(r[i]-e)*(r[i+1]-s)}e+=this.getFrameEntries();let a=r[n-2],o=r[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+s]-o)}},$=class extends Q{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}let i=this.curves[s>>1];switch(i){case 0:let i=e[s],r=e[s+1];return r+(t-i)/(e[s+2]-i)*(e[s+2+1]-r);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}},tt=class extends Q{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}},et=class extends ${constructor(t,e,s){super(t,e,F+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.rotation=o.data.rotation);case 1:o.rotation+=(o.data.rotation-o.rotation)*r}return}let h=this.getCurveValue(s);switch(n){case 0:o.rotation=o.data.rotation+h*r;break;case 1:case 2:h+=o.data.rotation-o.rotation;case 3:o.rotation+=h*r}}},st=class extends tt{constructor(t,e,s){super(t,e,R+"|"+s,X+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case 0:return o.x=o.data.x,void(o.y=o.data.y);case 1:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let l=0,c=0,d=J.search(h,s,3),u=this.curves[d/3];switch(u){case 0:let t=h[d];l=h[d+1],c=h[d+2];let e=(s-t)/(h[d+3]-t);l+=(h[d+3+1]-l)*e,c+=(h[d+3+2]-c)*e;break;case 1:l=h[d+1],c=h[d+2];break;default:l=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(n){case 0:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case 1:case 2:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case 3:o.x+=l*r,o.y+=c*r}}},it=class extends ${constructor(t,e,s){super(t,e,R+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.x=o.data.x);case 1:o.x+=(o.data.x-o.x)*r}return}let h=this.getCurveValue(s);switch(n){case 0:o.x=o.data.x+h*r;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*r;break;case 3:o.x+=h*r}}},rt=class extends ${constructor(t,e,s){super(t,e,X+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.y=o.data.y);case 1:o.y+=(o.data.y-o.y)*r}return}let h=this.getCurveValue(s);switch(n){case 0:o.y=o.data.y+h*r;break;case 1:case 2:o.y+=(o.data.y+h-o.y)*r;break;case 3:o.y+=h*r}}},nt=class extends tt{constructor(t,e,s){super(t,e,L+"|"+s,B+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let h=t.bones[this.boneIndex];if(!h.active)return;let l,c,d=this.frames;if(s<d[0]){switch(n){case 0:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case 1:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let u=J.search(d,s,3),m=this.curves[u/3];switch(m){case 0:let t=d[u];l=d[u+1],c=d[u+2];let e=(s-t)/(d[u+3]-t);l+=(d[u+3+1]-l)*e,c+=(d[u+3+2]-c)*e;break;case 1:l=d[u+1],c=d[u+2];break;default:l=this.getBezierValue(s,u,1,m-2),c=this.getBezierValue(s,u,2,m+18-2)}if(l*=h.data.scaleX,c*=h.data.scaleY,1==r)3==n?(h.scaleX+=l-h.data.scaleX,h.scaleY+=c-h.data.scaleY):(h.scaleX=l,h.scaleY=c);else{let t=0,e=0;if(1==a)switch(n){case 0:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(l)*o.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*o.signum(e)-e)*r;break;case 1:case 2:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*o.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*o.signum(e)-e)*r;break;case 3:h.scaleX+=(l-h.data.scaleX)*r,h.scaleY+=(c-h.data.scaleY)*r}else switch(n){case 0:t=Math.abs(h.data.scaleX)*o.signum(l),e=Math.abs(h.data.scaleY)*o.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case 1:case 2:t=Math.abs(h.scaleX)*o.signum(l),e=Math.abs(h.scaleY)*o.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case 3:h.scaleX+=(l-h.data.scaleX)*r,h.scaleY+=(c-h.data.scaleY)*r}}}},at=class extends ${constructor(t,e,s){super(t,e,L+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let h=t.bones[this.boneIndex];if(!h.active)return;if(s<this.frames[0]){switch(n){case 0:return void(h.scaleX=h.data.scaleX);case 1:h.scaleX+=(h.data.scaleX-h.scaleX)*r}return}let l=this.getCurveValue(s)*h.data.scaleX;if(1==r)3==n?h.scaleX+=l-h.data.scaleX:h.scaleX=l;else{let t=0;if(1==a)switch(n){case 0:t=h.data.scaleX,h.scaleX=t+(Math.abs(l)*o.signum(t)-t)*r;break;case 1:case 2:t=h.scaleX,h.scaleX=t+(Math.abs(l)*o.signum(t)-t)*r;break;case 3:h.scaleX+=(l-h.data.scaleX)*r}else switch(n){case 0:t=Math.abs(h.data.scaleX)*o.signum(l),h.scaleX=t+(l-t)*r;break;case 1:case 2:t=Math.abs(h.scaleX)*o.signum(l),h.scaleX=t+(l-t)*r;break;case 3:h.scaleX+=(l-h.data.scaleX)*r}}}},ot=class extends ${constructor(t,e,s){super(t,e,B+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let h=t.bones[this.boneIndex];if(!h.active)return;if(s<this.frames[0]){switch(n){case 0:return void(h.scaleY=h.data.scaleY);case 1:h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let l=this.getCurveValue(s)*h.data.scaleY;if(1==r)3==n?h.scaleY+=l-h.data.scaleY:h.scaleY=l;else{let t=0;if(1==a)switch(n){case 0:t=h.data.scaleY,h.scaleY=t+(Math.abs(l)*o.signum(t)-t)*r;break;case 1:case 2:t=h.scaleY,h.scaleY=t+(Math.abs(l)*o.signum(t)-t)*r;break;case 3:h.scaleY+=(l-h.data.scaleY)*r}else switch(n){case 0:t=Math.abs(h.data.scaleY)*o.signum(l),h.scaleY=t+(l-t)*r;break;case 1:case 2:t=Math.abs(h.scaleY)*o.signum(l),h.scaleY=t+(l-t)*r;break;case 3:h.scaleY+=(l-h.data.scaleY)*r}}}},ht=class extends tt{constructor(t,e,s){super(t,e,P+"|"+s,V+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case 0:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case 1:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=0,c=0,d=J.search(h,s,3),u=this.curves[d/3];switch(u){case 0:let t=h[d];l=h[d+1],c=h[d+2];let e=(s-t)/(h[d+3]-t);l+=(h[d+3+1]-l)*e,c+=(h[d+3+2]-c)*e;break;case 1:l=h[d+1],c=h[d+2];break;default:l=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(n){case 0:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case 1:case 2:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case 3:o.shearX+=l*r,o.shearY+=c*r}}},lt=class extends ${constructor(t,e,s){super(t,e,P+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.shearX=o.data.shearX);case 1:o.shearX+=(o.data.shearX-o.shearX)*r}return}let h=this.getCurveValue(s);switch(n){case 0:o.shearX=o.data.shearX+h*r;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case 3:o.shearX+=h*r}}},ct=class extends ${constructor(t,e,s){super(t,e,V+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.shearY=o.data.shearY);case 1:o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=this.getCurveValue(s);switch(n){case 0:o.shearY=o.data.shearY+h*r;break;case 1:case 2:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case 3:o.shearY+=h*r}}},dt=class extends Q{constructor(t,e,s){super(t,e,[D+"|"+s,O+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,r,n){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(s<h[0]){let t=o.data.color;switch(n){case 0:return void l.setFromColor(t);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r)}return}let c=0,d=0,u=0,m=0,g=J.search(h,s,5),f=this.curves[g/5];switch(f){case 0:let t=h[g];c=h[g+1],d=h[g+2],u=h[g+3],m=h[g+4];let e=(s-t)/(h[g+5]-t);c+=(h[g+5+1]-c)*e,d+=(h[g+5+2]-d)*e,u+=(h[g+5+3]-u)*e,m+=(h[g+5+4]-m)*e;break;case 1:c=h[g+1],d=h[g+2],u=h[g+3],m=h[g+4];break;default:c=this.getBezierValue(s,g,1,f-2),d=this.getBezierValue(s,g,2,f+18-2),u=this.getBezierValue(s,g,3,f+36-2),m=this.getBezierValue(s,g,4,f+54-2)}1==r?l.set(c,d,u,m):(0==n&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(d-l.g)*r,(u-l.b)*r,(m-l.a)*r))}},ut=class extends Q{constructor(t,e,s){super(t,e,[D+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(s<h[0]){let t=o.data.color;switch(n){case 0:return l.r=t.r,l.g=t.g,void(l.b=t.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r}return}let c=0,d=0,u=0,m=J.search(h,s,4),g=this.curves[m>>2];switch(g){case 0:let t=h[m];c=h[m+1],d=h[m+2],u=h[m+3];let e=(s-t)/(h[m+4]-t);c+=(h[m+4+1]-c)*e,d+=(h[m+4+2]-d)*e,u+=(h[m+4+3]-u)*e;break;case 1:c=h[m+1],d=h[m+2],u=h[m+3];break;default:c=this.getBezierValue(s,m,1,g-2),d=this.getBezierValue(s,m,2,g+18-2),u=this.getBezierValue(s,m,3,g+36-2)}if(1==r)l.r=c,l.g=d,l.b=u;else{if(0==n){let t=o.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*r,l.g+=(d-l.g)*r,l.b+=(u-l.b)*r}}},mt=class extends ${constructor(t,e,s){super(t,e,O+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.color;if(s<this.frames[0]){let t=o.data.color;switch(n){case 0:return void(h.a=t.a);case 1:h.a+=(t.a-h.a)*r}return}let l=this.getCurveValue(s);1==r?h.a=l:(0==n&&(h.a=o.data.color.a),h.a+=(l-h.a)*r)}},gt=class extends Q{constructor(t,e,s){super(t,e,[D+"|"+s,O+"|"+s,N+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,r,n,a,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=h}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(s<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,m=0,g=0,f=0,p=0,x=0,w=J.search(h,s,8),b=this.curves[w>>3];switch(b){case 0:let t=h[w];d=h[w+1],u=h[w+2],m=h[w+3],g=h[w+4],f=h[w+5],p=h[w+6],x=h[w+7];let e=(s-t)/(h[w+8]-t);d+=(h[w+8+1]-d)*e,u+=(h[w+8+2]-u)*e,m+=(h[w+8+3]-m)*e,g+=(h[w+8+4]-g)*e,f+=(h[w+8+5]-f)*e,p+=(h[w+8+6]-p)*e,x+=(h[w+8+7]-x)*e;break;case 1:d=h[w+1],u=h[w+2],m=h[w+3],g=h[w+4],f=h[w+5],p=h[w+6],x=h[w+7];break;default:d=this.getBezierValue(s,w,1,b-2),u=this.getBezierValue(s,w,2,b+18-2),m=this.getBezierValue(s,w,3,b+36-2),g=this.getBezierValue(s,w,4,b+54-2),f=this.getBezierValue(s,w,5,b+72-2),p=this.getBezierValue(s,w,6,b+90-2),x=this.getBezierValue(s,w,7,b+108-2)}if(1==r)l.set(d,u,m,g),c.r=f,c.g=p,c.b=x;else{if(0==n){l.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((d-l.r)*r,(u-l.g)*r,(m-l.b)*r,(g-l.a)*r),c.r+=(f-c.r)*r,c.g+=(p-c.g)*r,c.b+=(x-c.b)*r}}},ft=class extends Q{constructor(t,e,s){super(t,e,[D+"|"+s,N+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(s<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case 0:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,m=0,g=0,f=0,p=0,x=J.search(h,s,7),w=this.curves[x/7];switch(w){case 0:let t=h[x];d=h[x+1],u=h[x+2],m=h[x+3],g=h[x+4],f=h[x+5],p=h[x+6];let e=(s-t)/(h[x+7]-t);d+=(h[x+7+1]-d)*e,u+=(h[x+7+2]-u)*e,m+=(h[x+7+3]-m)*e,g+=(h[x+7+4]-g)*e,f+=(h[x+7+5]-f)*e,p+=(h[x+7+6]-p)*e;break;case 1:d=h[x+1],u=h[x+2],m=h[x+3],g=h[x+4],f=h[x+5],p=h[x+6];break;default:d=this.getBezierValue(s,x,1,w-2),u=this.getBezierValue(s,x,2,w+18-2),m=this.getBezierValue(s,x,3,w+36-2),g=this.getBezierValue(s,x,4,w+54-2),f=this.getBezierValue(s,x,5,w+72-2),p=this.getBezierValue(s,x,6,w+90-2)}if(1==r)l.r=d,l.g=u,l.b=m,c.r=g,c.g=f,c.b=p;else{if(0==n){let t=o.data.color,e=o.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(d-l.r)*r,l.g+=(u-l.g)*r,l.b+=(m-l.b)*r,c.r+=(g-c.r)*r,c.g+=(f-c.g)*r,c.b+=(p-c.b)*r}}},pt=class extends J{constructor(t,e){super(t,[U+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(1!=a?s<this.frames[0]?0!=n&&1!=n||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[J.search1(this.frames,s)]):0==n&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},xt=class extends Q{constructor(t,e,s,i){super(t,e,[W+"|"+s+"|"+i.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,r,n,a,o,h,l,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=.03*(i-2*n+o),g=.03*h-.06*a,f=.006*(3*(n-o)-i+l),p=.018*(a-h+.33333333),x=2*m+f,w=2*g+p,b=.3*(n-i)+m+.16666667*f,y=.3*a+g+.16666667*p,v=i+b,A=y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=A,b+=x,y+=w,x+=f,w+=p,v+=b,A+=y}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:let s=this.frames[e];return(t-s)/(this.frames[e+this.getFrameEntries()]-s);case 1:return 0}if(i-=2,s[i]>t){let r=this.frames[e];return s[i+1]*(t-r)/(s[i]-r)}let r=i+18;for(i+=2;i<r;i+=2)if(s[i]>=t){let e=s[i-2],r=s[i-1];return r+(t-e)/(s[i]-e)*(s[i+1]-r)}let n=s[r-2],a=s[r-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.getAttachment();if(!h)return;if(!(h instanceof y)||h.timelineAttachment!=this.attachment)return;let l=o.deform;0==l.length&&(n=0);let c=this.vertices,d=c[0].length,m=this.frames;if(s<m[0]){switch(n){case 0:return void(l.length=0);case 1:if(1==r)return void(l.length=0);l.length=d;let t=h;if(t.bones){r=1-r;for(g=0;g<d;g++)l[g]*=r}else{let e=t.vertices;for(var g=0;g<d;g++)l[g]+=(e[g]-l[g])*r}}return}if(l.length=d,s>=m[m.length-1]){let t=c[m.length-1];if(1==r)if(3==n){let e=h;if(e.bones)for(let e=0;e<d;e++)l[e]+=t[e];else{let s=e.vertices;for(let e=0;e<d;e++)l[e]+=t[e]-s[e]}}else u.arrayCopy(t,0,l,0,d);else switch(n){case 0:{let e=h;if(e.bones)for(let e=0;e<d;e++)l[e]=t[e]*r;else{let s=e.vertices;for(let e=0;e<d;e++){let i=s[e];l[e]=i+(t[e]-i)*r}}break}case 1:case 2:for(let e=0;e<d;e++)l[e]+=(t[e]-l[e])*r;break;case 3:let e=h;if(e.bones)for(let e=0;e<d;e++)l[e]+=t[e]*r;else{let s=e.vertices;for(let e=0;e<d;e++)l[e]+=(t[e]-s[e])*r}}return}let f=J.search1(m,s),p=this.getCurvePercent(s,f),x=c[f],w=c[f+1];if(1==r)if(3==n){let t=h;if(t.bones)for(let t=0;t<d;t++){let e=x[t];l[t]+=e+(w[t]-e)*p}else{let e=t.vertices;for(let t=0;t<d;t++){let s=x[t];l[t]+=s+(w[t]-s)*p-e[t]}}}else for(let t=0;t<d;t++){let e=x[t];l[t]=e+(w[t]-e)*p}else switch(n){case 0:{let t=h;if(t.bones)for(let t=0;t<d;t++){let e=x[t];l[t]=(e+(w[t]-e)*p)*r}else{let e=t.vertices;for(let t=0;t<d;t++){let s=x[t],i=e[t];l[t]=i+(s+(w[t]-s)*p-i)*r}}break}case 1:case 2:for(let t=0;t<d;t++){let e=x[t];l[t]+=(e+(w[t]-e)*p-l[t])*r}break;case 3:let t=h;if(t.bones)for(let t=0;t<d;t++){let e=x[t];l[t]+=(e+(w[t]-e)*p)*r}else{let e=t.vertices;for(let t=0;t<d;t++){let s=x[t];l[t]+=(s+(w[t]-s)*p-e[t])*r}}}}},wt=class extends J{constructor(t){super(t,wt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,r,n,a){if(!i)return;let o=this.frames,h=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,r,n,a),e=-1;else if(e>=o[h-1])return;if(s<o[0])return;let l=0;if(e<o[0])l=0;else{l=J.search1(o,e)+1;let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&s>=o[l];l++)i.push(this.events[l])}},bt=wt;bt.propertyIds=[""+z];var yt=class extends J{constructor(t){super(t,yt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,r,n,a){if(1==a)return void(0==n&&u.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(s<this.frames[0])return void(0!=n&&1!=n||u.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=J.search1(this.frames,s),h=this.drawOrders[o];if(h){let e=t.drawOrder,s=t.slots;for(let t=0,i=h.length;t<i;t++)e[t]=s[h[t]]}else u.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},vt=yt;vt.propertyIds=[""+q];var At=class extends Q{constructor(t,e,s){super(t,e,[G+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,r,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,s,i,r,n,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case 0:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case 1:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let l=0,c=0,d=J.search(h,s,6),u=this.curves[d/6];switch(u){case 0:let t=h[d];l=h[d+1],c=h[d+2];let e=(s-t)/(h[d+6]-t);l+=(h[d+6+1]-l)*e,c+=(h[d+6+2]-c)*e;break;case 1:l=h[d+1],c=h[d+2];break;default:l=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}0==n?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,1==a?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[d+3],o.compress=0!=h[d+4],o.stretch=0!=h[d+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,0==a&&(o.bendDirection=h[d+3],o.compress=0!=h[d+4],o.stretch=0!=h[d+5]))}},St=class extends Q{constructor(t,e,s){super(t,e,[j+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,n,a,o){let h=this.frames;h[t*=7]=e,h[t+1]=s,h[t+2]=i,h[t+3]=r,h[t+4]=n,h[t+5]=a,h[t+6]=o}apply(t,e,s,i,r,n,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let h,l,c,d,u,m,g=this.frames;if(s<g[0]){let t=o.data;switch(n){case 0:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case 1:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let f=J.search(g,s,7),p=this.curves[f/7];switch(p){case 0:let t=g[f];h=g[f+1],l=g[f+2],c=g[f+3],d=g[f+4],u=g[f+5],m=g[f+6];let e=(s-t)/(g[f+7]-t);h+=(g[f+7+1]-h)*e,l+=(g[f+7+2]-l)*e,c+=(g[f+7+3]-c)*e,d+=(g[f+7+4]-d)*e,u+=(g[f+7+5]-u)*e,m+=(g[f+7+6]-m)*e;break;case 1:h=g[f+1],l=g[f+2],c=g[f+3],d=g[f+4],u=g[f+5],m=g[f+6];break;default:h=this.getBezierValue(s,f,1,p-2),l=this.getBezierValue(s,f,2,p+18-2),c=this.getBezierValue(s,f,3,p+36-2),d=this.getBezierValue(s,f,4,p+54-2),u=this.getBezierValue(s,f,5,p+72-2),m=this.getBezierValue(s,f,6,p+90-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(d-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(u-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(m-t.mixShearY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(d-o.mixScaleX)*r,o.mixScaleY+=(u-o.mixScaleY)*r,o.mixShearY+=(m-o.mixShearY)*r}},It=class extends ${constructor(t,e,s){super(t,e,_+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.position=o.data.position);case 1:o.position+=(o.data.position-o.position)*r}return}let h=this.getCurveValue(s);0==n?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}},Ct=class extends ${constructor(t,e,s){super(t,e,H+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case 0:return void(o.spacing=o.data.spacing);case 1:o.spacing+=(o.data.spacing-o.spacing)*r}return}let h=this.getCurveValue(s);0==n?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}},Tt=class extends Q{constructor(t,e,s){super(t,e,[Z+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){let n=this.frames;n[t<<=2]=e,n[t+1]=s,n[t+2]=i,n[t+3]=r}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let h,l,c,d=this.frames;if(s<d[0]){switch(n){case 0:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case 1:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let u=J.search(d,s,4),m=this.curves[u>>2];switch(m){case 0:let t=d[u];h=d[u+1],l=d[u+2],c=d[u+3];let e=(s-t)/(d[u+4]-t);h+=(d[u+4+1]-h)*e,l+=(d[u+4+2]-l)*e,c+=(d[u+4+3]-c)*e;break;case 1:h=d[u+1],l=d[u+2],c=d[u+3];break;default:h=this.getBezierValue(s,u,1,m-2),l=this.getBezierValue(s,u,2,m+18-2),c=this.getBezierValue(s,u,3,m+36-2)}if(0==n){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r}},Mt=class extends J{constructor(t,e,s){super(t,[K+"|"+e+"|"+s.sequence.id]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return Mt.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,r){let n=this.frames;n[t*=Mt.ENTRIES]=e,n[t+Mt.MODE]=s|i<<4,n[t+Mt.DELAY]=r}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.attachment,l=this.attachment;if(!(h==l||h instanceof y&&h.timelineAttachment==l))return;let c=this.frames;if(s<c[0])return void(0!=n&&1!=n||(o.sequenceIndex=-1));let d=J.search(c,s,Mt.ENTRIES),u=c[d],m=c[d+Mt.MODE],g=c[d+Mt.DELAY];if(!this.attachment.sequence)return;let f=m>>4,p=this.attachment.sequence.regions.length,x=E[15&m];if(x!=v.hold)switch(f+=(s-u)/g+1e-5|0,x){case v.once:f=Math.min(p-1,f);break;case v.loop:f%=p;break;case v.pingpong:{let t=(p<<1)-2;f=0==t?0:f%t,f>=p&&(f=t-f);break}case v.onceReverse:f=Math.max(p-1-f,0);break;case v.loopReverse:f=p-1-f%p;break;case v.pingpongReverse:{let t=(p<<1)-2;f=0==t?0:(f+p-1)%t,f>=p&&(f=t-f)}}o.sequenceIndex=f}},kt=Mt;kt.ENTRIES=3,kt.MODE=1,kt.DELAY=2;var Et=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Lt(this),this.propertyIDs=new i,this.animationsChanged=!1,this.trackEntryPool=new g(()=>new Xt),this.data=t}static emptyAnimation(){return Et._emptyAnimation}update(t){t*=this.timeScale;let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let r=t*i.timeScale;if(i.delay>0){if(i.delay-=r,i.delay>0)continue;r=-i.delay,i.delay=0}let n=i.next;if(n){let e=i.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*n.timeScale,i.trackTime+=r,this.setCurrent(s,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;let i=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let n=0,a=s.length;n<a;n++){let a=s[n];if(!a||a.delay>0)continue;i=!0;let o=0==n?C.first:a.mixBlend,h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),d=c,m=e;a.reverse&&(d=a.animation.duration-d,m=null);let g=a.animation.timelines,f=g.length;if(0==n&&1==h||o==C.add)for(let e=0;e<f;e++){u.webkit602BugfixHelper(h,o);var r=g[e];r instanceof pt?this.applyAttachmentTimeline(r,t,d,o,!0):r.apply(t,l,d,m,h,o,M.mixIn)}else{let e=a.timelineMode,s=a.shortestRotation,i=!s&&a.timelinesRotation.length!=f<<1;i&&(a.timelinesRotation.length=f<<1);for(let r=0;r<f;r++){let n=g[r],c=e[r]==Nt?o:C.setup;!s&&n instanceof et?this.applyRotateTimeline(n,t,d,h,c,a.timelinesRotation,r<<1,i):n instanceof pt?this.applyAttachmentTimeline(n,t,d,o,!0):(u.webkit602BugfixHelper(h,o),n.apply(t,l,d,m,h,c,M.mixIn))}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+Gt,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==n){var c=l.data.attachmentName;l.setAttachment(c?t.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){let i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let r=0;0==t.mixDuration?(r=1,s==C.first&&(s=C.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),s!=C.first&&(s=i.mixBlend));let n=r<i.attachmentThreshold,a=r<i.drawOrderThreshold,o=i.animation.timelines,h=o.length,l=i.alpha*t.interruptAlpha,c=l*(1-r),d=i.animationLast,m=i.getAnimationTime(),g=m,f=null;if(i.reverse?g=i.animation.duration-g:r<i.eventThreshold&&(f=this.events),s==C.add)for(let t=0;t<h;t++)o[t].apply(e,d,g,f,c,s,M.mixOut);else{let t=i.timelineMode,r=i.timelineHoldMix,m=i.shortestRotation,p=!m&&i.timelinesRotation.length!=h<<1;p&&(i.timelinesRotation.length=h<<1),i.totalAlpha=0;for(let x=0;x<h;x++){let h,w=o[x],b=M.mixOut,y=0;switch(t[x]){case Nt:if(!a&&w instanceof vt)continue;h=s,y=c;break;case Ut:h=C.setup,y=c;break;case Wt:h=s,y=l;break;case zt:h=C.setup,y=l;break;default:h=C.setup;let t=r[x];y=l*Math.max(0,1-t.mixTime/t.mixDuration)}i.totalAlpha+=y,!m&&w instanceof et?this.applyRotateTimeline(w,e,g,y,h,i.timelinesRotation,x<<1,p):w instanceof pt?this.applyAttachmentTimeline(w,e,g,h,n):(u.webkit602BugfixHelper(y,s),a&&w instanceof vt&&h==C.setup&&(b=M.mixIn),w.apply(e,d,g,f,y,h,b))}}return t.mixDuration>0&&this.queueEvents(i,m),this.events.length=0,i.nextAnimationLast=m,i.nextTrackLast=i.trackTime,r}applyAttachmentTimeline(t,e,s,i,r){var n=e.slots[t.slotIndex];n.bone.active&&(s<t.frames[0]?i!=C.setup&&i!=C.first||this.setAttachment(e,n,n.data.attachmentName,r):this.setAttachment(e,n,t.attachmentNames[J.search1(t.frames,s)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+Gt))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+jt)}applyRotateTimeline(t,e,s,i,r,n,a,h){if(h&&(n[a]=0),1==i)return void t.apply(e,0,s,null,1,r,M.mixIn);let l=e.bones[t.boneIndex];if(!l.active)return;let c=0,d=0;if(s<t.frames[0])switch(r){case C.setup:l.rotation=l.data.rotation;default:return;case C.first:c=l.rotation,d=l.data.rotation}else c=r==C.setup?l.data.rotation:l.rotation,d=l.data.rotation+t.getCurveValue(s);let u=0,m=d-c;if(m-=360*(16384-(16384.499999999996-m/360|0)),0==m)u=n[a];else{let t=0,e=0;h?(t=0,e=m):(t=n[a],e=n[a+1]);let s=m>0,i=t>=0;o.signum(e)!=o.signum(m)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*o.signum(t)),i=s),u=m+t-t%360,i!=s&&(u+=360*o.signum(t)),n[a]=u}n[a+1]=m,l.rotation=c+u*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,r=i-s,n=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<n)break;e.time>i||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||n>t.trackTime%r:e>=i&&t.animationLast<i,l&&this.queue.complete(t);o<h;o++){let e=a[o];e.time<s||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){let t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){let i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){let i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let i=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,i=!1):this.clearNext(r));let n=this.trackEntry(t,e,s,r);return this.setCurrent(t,n,i),this.queue.drain(),n}addAnimation(t,e,s=!1,i=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let n=this.trackEntry(t,e,s,r);return r?(r.next=n,n.previous=r,i<=0&&(i+=r.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=i,n}setEmptyAnimation(t,e=0){let s=this.setAnimationWith(t,Et.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){let i=this.addAnimationWith(t,Et.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){let s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(u.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=s,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=i?this.data.getMix(i.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=C.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do{s.mixingTo&&s.mixBlend==C.add||this.computeHold(s),s=s.mixingTo}while(s)}}}computeHold(t){let e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,r=t.timelineMode;r.length=i;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<i;t++)r[t]=a.addAll(s[t].getPropertyIds())?zt:Wt;else t:for(let o=0;o<i;o++){let i=s[o],h=i.getPropertyIds();if(a.addAll(h))if(!e||i instanceof pt||i instanceof vt||i instanceof bt||!e.animation.hasTimeline(h))r[o]=Ut;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=qt,n[o]=s;continue t}break}r[o]=zt}else r[o]=Nt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},Yt=Et;Yt._emptyAnimation=new Y("<empty>",[],0);var Ft,Rt,Xt=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=C.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},Lt=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(Ft.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Ft.interrupt),this.objects.push(t)}end(t){this.objects.push(Ft.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Ft.dispose),this.objects.push(t)}complete(t){this.objects.push(Ft.complete),this.objects.push(t)}event(t,e){this.objects.push(Ft.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){let i=t[s],r=t[s+1];switch(i){case Ft.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let s=e[t];s.start&&s.start(r)}break;case Ft.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let s=e[t];s.interrupt&&s.interrupt(r)}break;case Ft.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let s=e[t];s.end&&s.end(r)}case Ft.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let s=e[t];s.dispose&&s.dispose(r)}this.animState.trackEntryPool.free(r);break;case Ft.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let s=e[t];s.complete&&s.complete(r)}break;case Ft.event:let i=t[2+s++];r.listener&&r.listener.event&&r.listener.event(r,i);for(let t=0;t<e.length;t++){let s=e[t];s.event&&s.event(r,i)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};(Rt=Ft||(Ft={}))[Rt.start=0]="start",Rt[Rt.interrupt=1]="interrupt",Rt[Rt.end=2]="end",Rt[Rt.dispose=3]="dispose",Rt[Rt.complete=4]="complete",Rt[Rt.event=5]="event";var Bt,Pt,Vt,Dt,Ot=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},Nt=0,Ut=1,Wt=2,zt=3,qt=4,Gt=1,jt=2,_t=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){let i=this.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(i,r,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let i=t.name+"."+e.name;this.animationToMixTime[i]=s}getMix(t,e){let s=t.name+"."+e.name,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}},Ht=class extends y{constructor(t){super(t),this.color=new n(1,1,1,1)}copy(){let t=new Ht(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Zt=class extends y{constructor(t){super(t),this.endSlot=null,this.color=new n(.2275,.2275,.8078,1)}copy(){let t=new Zt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Kt=class{constructor(t){this._image=t}getImage(){return this._image}};(Pt=Bt||(Bt={}))[Pt.Nearest=9728]="Nearest",Pt[Pt.Linear=9729]="Linear",Pt[Pt.MipMap=9987]="MipMap",Pt[Pt.MipMapNearestNearest=9984]="MipMapNearestNearest",Pt[Pt.MipMapLinearNearest=9985]="MipMapLinearNearest",Pt[Pt.MipMapNearestLinear=9986]="MipMapNearestLinear",Pt[Pt.MipMapLinearLinear=9987]="MipMapLinearLinear",(Dt=Vt||(Vt={}))[Dt.MirroredRepeat=33648]="MirroredRepeat",Dt[Dt.ClampToEdge=33071]="ClampToEdge",Dt[Dt.Repeat=10497]="Repeat";var Jt=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},Qt=class extends Kt{setFilters(t,e){}setWraps(t,e){}dispose(){}},$t=class{constructor(t){this.pages=new Array,this.regions=new Array;let e=new te(t),s=new Array(4),i={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=u.enumValue(Bt,s[1]),t.magFilter=u.enumValue(Bt,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=Vt.Repeat),-1!=s[1].indexOf("y")&&(t.vWrap=Vt.Repeat)},pma:t=>{t.pma="true"==s[1]}};var r={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{let e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(s,n);)n=e.readLine();let a=null,o=null,h=null;for(;null!==n;)if(0==n.trim().length)a=null,n=e.readLine();else if(a){let t=new se(a,n);for(;;){let i=e.readEntry(s,n=e.readLine());if(0==i)break;let a=r[s[0]];if(a)a(t);else{o||(o=[]),h||(h=[]),o.push(s[0]);let t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));h.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&h&&h.length>0&&(t.names=o,t.values=h,o=null,h=null),t.u=t.x/a.width,t.v=t.y/a.height,90==t.degrees?(t.u2=(t.x+t.height)/a.width,t.v2=(t.y+t.width)/a.height):(t.u2=(t.x+t.width)/a.width,t.v2=(t.y+t.height)/a.height),this.regions.push(t)}else{for(a=new ee(n.trim());0!=e.readEntry(s,n=e.readLine());){let t=i[s[0]];t&&t(a)}this.pages.push(a)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)null==(t=this.pages[e].texture)||t.dispose()}},te=class{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let s=e.indexOf(":"),i=e.indexOf("https:");if(-1==s||-1!=i)return 0;t[0]=e.substr(0,s).trim();for(let i=1,r=s+1;;i++){let s=e.indexOf(",",r);if(-1==s)return t[i]=e.substr(r).trim(),i;if(t[i]=e.substr(r,s-r).trim(),r=s+1,4==i)return 4}}},ee=class{constructor(t){this.minFilter=Bt.Nearest,this.magFilter=Bt.Nearest,this.uWrap=Vt.ClampToEdge,this.vWrap=Vt.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}},se=class extends Jt{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e}},ie=class extends y{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new n(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new n(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=u.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,r=this.region.v,n=0,a=0;if(this.region instanceof se){let o=this.region,h=o.page.texture.getImage(),l=h.width,c=h.height;switch(o.degrees){case 90:i-=(o.originalHeight-o.offsetY-o.height)/l,r-=(o.originalWidth-o.offsetX-o.width)/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+t[o+1]*n,e[o+1]=r+(1-t[o])*a;return;case 180:i-=(o.originalWidth-o.offsetX-o.width)/l,r-=o.offsetY/c,n=o.originalWidth/l,a=o.originalHeight/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o])*n,e[o+1]=r+(1-t[o+1])*a;return;case 270:i-=o.offsetY/l,r-=o.offsetX/c,n=o.originalHeight/l,a=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o+1])*n,e[o+1]=r+t[o]*a;return}i-=o.offsetX/l,r-=(o.originalHeight-o.offsetY-o.height)/c,n=o.originalWidth/l,a=o.originalHeight/c}else this.region?(n=this.region.u2-i,a=this.region.v2-r):(i=r=0,n=a=1);for(let o=0;o<s;o+=2)e[o]=i+t[o]*n,e[o+1]=r+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new ie(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),u.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),u.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),u.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),u.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,r,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,r,n)}newLinkedMesh(){let t=new ie(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}},re=class extends y{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new n(1,1,1,1)}copy(){let t=new re(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),u.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},ne=class extends y{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new n(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=o.cosDeg(this.rotation),s=o.sinDeg(this.rotation),i=e*t.a+s*t.b,r=e*t.c+s*t.d;return Math.atan2(r,i)*o.radDeg}copy(){let t=new ne(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},ae=class extends w{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new n(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=u.newFloatArray(8),this.uvs=u.newFloatArray(8),this.tempColor=new n(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*e,r=-this.height/2*this.scaleY+this.region.offsetY*s,n=i+this.region.width*e,a=r+this.region.height*s,o=this.rotation*Math.PI/180,h=Math.cos(o),l=Math.sin(o),c=this.x,d=this.y,u=i*h+c,m=i*l,g=r*h+d,f=r*l,p=n*h+c,x=n*l,w=a*h+d,b=a*l,y=this.offset;y[0]=u-f,y[1]=g+m,y[2]=u-b,y[3]=w+m,y[4]=p-b,y[5]=w+x,y[6]=p-f,y[7]=g+x;let v=this.uvs;90==t.degrees?(v[2]=t.u,v[3]=t.v2,v[4]=t.u,v[5]=t.v,v[6]=t.u2,v[7]=t.v,v[0]=t.u2,v[1]=t.v2):(v[0]=t.u,v[1]=t.v2,v[2]=t.u,v[3]=t.v,v[4]=t.u2,v[5]=t.v,v[6]=t.u2,v[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,n=this.offset,a=r.worldX,o=r.worldY,h=r.a,l=r.b,c=r.c,d=r.d,u=0,m=0;u=n[0],m=n[1],e[s]=u*h+m*l+a,e[s+1]=u*c+m*d+o,s+=i,u=n[2],m=n[3],e[s]=u*h+m*l+a,e[s+1]=u*c+m*d+o,s+=i,u=n[4],m=n[5],e[s]=u*h+m*l+a,e[s+1]=u*c+m*d+o,s+=i,u=n[6],m=n[7],e[s]=u*h+m*l+a,e[s+1]=u*c+m*d+o}copy(){let t=new ae(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,u.arrayCopy(this.uvs,0,t.uvs,0,8),u.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},oe=ae;oe.X1=0,oe.Y1=1,oe.C1R=2,oe.C1G=3,oe.C1B=4,oe.C1A=5,oe.U1=6,oe.V1=7,oe.X2=8,oe.Y2=9,oe.C2R=10,oe.C2G=11,oe.C2B=12,oe.C2A=13,oe.U2=14,oe.V2=15,oe.X3=16,oe.Y3=17,oe.C3R=18,oe.C3G=19,oe.C3B=20,oe.C3A=21,oe.U3=22,oe.V3=23,oe.X4=24,oe.Y4=25,oe.C4R=26,oe.C4G=27,oe.C4B=28,oe.C4A=29,oe.U4=30,oe.V4=31;var he,le,ce=class{constructor(t){this.atlas=t}loadSequence(t,e,s){let i=s.regions;for(let r=0,n=i.length;r<n;r++){let n=s.getPath(e,r),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");i[r]=a,i[r].renderObject=i[r]}}newRegionAttachment(t,e,s,i){let r=new oe(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");t.renderObject=t,r.region=t}return r}newMeshAttachment(t,e,s,i){let r=new ie(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");t.renderObject=t,r.region=t}return r}newBoundingBoxAttachment(t,e){return new Ht(e)}newPathAttachment(t,e){return new re(e)}newPointAttachment(t,e){return new ne(e)}newClippingAttachment(t,e){return new Zt(e)}},de=class{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=he.Normal,this.skinRequired=!1,this.color=new n,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}};(le=he||(he={}))[le.Normal=0]="Normal",le[le.OnlyTranslation=1]="OnlyTranslation",le[le.NoRotationOrReflection=2]="NoRotationOrReflection",le[le.NoScale=3]="NoScale",le[le.NoScaleOrReflection=4]="NoScaleOrReflection";var ue,me,ge,fe,pe,xe,we=class{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,r,n,a){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=r,this.ashearX=n,this.ashearY=a;let h=this.parent;if(!h){let h=this.skeleton,l=s+90+a,c=h.scaleX,d=h.scaleY;return this.a=o.cosDeg(s+n)*i*c,this.b=o.cosDeg(l)*r*c,this.c=o.sinDeg(s+n)*i*d,this.d=o.sinDeg(l)*r*d,this.worldX=t*c+h.x,void(this.worldY=e*d+h.y)}let l=h.a,c=h.b,d=h.c,u=h.d;switch(this.worldX=l*t+c*e+h.worldX,this.worldY=d*t+u*e+h.worldY,this.data.transformMode){case he.Normal:{let t=s+90+a,e=o.cosDeg(s+n)*i,h=o.cosDeg(t)*r,m=o.sinDeg(s+n)*i,g=o.sinDeg(t)*r;return this.a=l*e+c*m,this.b=l*h+c*g,this.c=d*e+u*m,void(this.d=d*h+u*g)}case he.OnlyTranslation:{let t=s+90+a;this.a=o.cosDeg(s+n)*i,this.b=o.cosDeg(t)*r,this.c=o.sinDeg(s+n)*i,this.d=o.sinDeg(t)*r;break}case he.NoRotationOrReflection:{let t=l*l+d*d,e=0;t>1e-4?(t=Math.abs(l*u-c*d)/t,l/=this.skeleton.scaleX,d/=this.skeleton.scaleY,c=d*t,u=l*t,e=Math.atan2(d,l)*o.radDeg):(l=0,d=0,e=90-Math.atan2(u,c)*o.radDeg);let h=s+n-e,m=s+a-e+90,g=o.cosDeg(h)*i,f=o.cosDeg(m)*r,p=o.sinDeg(h)*i,x=o.sinDeg(m)*r;this.a=l*g-c*p,this.b=l*f-c*x,this.c=d*g+u*p,this.d=d*f+u*x;break}case he.NoScale:case he.NoScaleOrReflection:{let t=o.cosDeg(s),e=o.sinDeg(s),h=(l*t+c*e)/this.skeleton.scaleX,m=(d*t+u*e)/this.skeleton.scaleY,g=Math.sqrt(h*h+m*m);g>1e-5&&(g=1/g),h*=g,m*=g,g=Math.sqrt(h*h+m*m),this.data.transformMode==he.NoScale&&l*u-c*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(g=-g);let f=Math.PI/2+Math.atan2(m,h),p=Math.cos(f)*g,x=Math.sin(f)*g,w=o.cosDeg(n)*i,b=o.cosDeg(90+a)*r,y=o.sinDeg(n)*i,v=o.sinDeg(90+a)*r;this.a=h*w+p*y,this.b=h*b+p*v,this.c=m*w+x*y,this.d=m*b+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*o.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*o.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*o.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*o.radDeg);let e=t.a,s=t.b,i=t.c,r=t.d,n=1/(e*r-s*i),a=this.worldX-t.worldX,h=this.worldY-t.worldY;this.ax=a*r*n-h*s*n,this.ay=h*e*n-a*i*n;let l=n*r,c=n*e,d=n*s,u=n*i,m=l*this.a-d*this.c,g=l*this.b-d*this.d,f=c*this.c-u*this.a,p=c*this.d-u*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(m*m+f*f),this.ascaleX>1e-4){let t=m*p-g*f;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(m*g+f*p,t)*o.radDeg,this.arotation=Math.atan2(f,m)*o.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(g*g+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,g)*o.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){let e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){let e=o.sinDeg(t),s=o.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*o.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=o.sinDeg(t),s=o.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*o.radDeg}rotateWorld(t){let e=this.a,s=this.b,i=this.c,r=this.d,n=o.cosDeg(t),a=o.sinDeg(t);this.a=n*e-a*i,this.b=n*s-a*r,this.c=a*e+n*i,this.d=a*s+n*r}},be=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},ye=class{constructor(t,e="",s=new ve){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise((t,e)=>{let s=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(s)};requestAnimationFrame(s)})}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadBinary(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load binary ${t}: status ${e}, ${i}`)})}loadText(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadText(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load text ${t}: status ${e}, ${i}`)})}loadJson(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadJson(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,`Couldn't load JSON ${t}: status ${e}, ${i}`)})}loadTexture(t,e=()=>{},s=()=>{}){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then(e=>e.ok?e.blob():(this.error(s,t,`Couldn't load image: ${t}`),null)).then(t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(s=>{s&&this.success(e,t,this.textureLoader(s))});else{let i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.success(e,t,this.textureLoader(i))},i.onerror=()=>{this.error(s,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),i.src=t}}loadTextureAtlas(t,e=()=>{},s=()=>{},i){let r=t.lastIndexOf("/"),n=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,r=>{try{let a=new $t(r),o=a.pages.length,h=!1;for(let r of a.pages)this.loadTexture(i?i[r.name]:n+r.name,(s,i)=>{h||(r.setTexture(i),0==--o&&this.success(e,t,a))},(e,i)=>{h||this.error(s,t,`Couldn't load texture atlas ${t} page image: ${e}`),h=!0})}catch(e){this.error(s,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}},(e,i)=>{this.error(s,t,`Couldn't load texture atlas ${t}: status ${e}, ${i}`)})}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let s=this.errors[t];throw Error("Asset not found: "+t+(s?"\n"+s:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},ve=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=e.charCodeAt(r);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);let r=()=>{this.finish(t,i.status,i.responseText)};i.onload=r,i.onerror=r,i.send()}downloadJson(t,e,s){this.downloadText(t,t=>{e(JSON.parse(t))},s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";let r=()=>{this.finish(t,i.status,i.response)};i.onload=()=>{200==i.status||0==i.status?this.finish(t,200,new Uint8Array(i.response)):r()},i.onerror=r,i.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){let i=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[s]:[e,s];for(let t=r.length-1,e=i.length;t<e;t+=2)i[t].apply(null,r)}},Ae=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},Se=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},Ie=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,r,n,a){let h=t.parent;if(!h)throw new Error("IK bone must have parent.");let l=h.a,c=h.b,d=h.c,u=h.d,m=-t.ashearX-t.arotation,g=0,f=0;switch(t.data.transformMode){case he.OnlyTranslation:g=e-t.worldX,f=s-t.worldY;break;case he.NoRotationOrReflection:let i=Math.abs(l*u-c*d)/(l*l+d*d),r=l/t.skeleton.scaleX,n=d/t.skeleton.scaleY;c=-n*i*t.skeleton.scaleX,u=r*i*t.skeleton.scaleY,m+=Math.atan2(n,r)*o.radDeg;default:let a=e-h.worldX,p=s-h.worldY,x=l*u-c*d;g=(a*u-p*c)/x-t.ax,f=(p*l-a*d)/x-t.ay}m+=Math.atan2(f,g)*o.radDeg,t.ascaleX<0&&(m+=180),m>180?m-=360:m<-180&&(m+=360);let p=t.ascaleX,x=t.ascaleY;if(i||r){switch(t.data.transformMode){case he.NoScale:case he.NoScaleOrReflection:g=e-t.worldX,f=s-t.worldY}let o=t.data.length*p,h=Math.sqrt(g*g+f*f);if(i&&h<o||r&&h>o&&o>1e-4){let t=(h/o-1)*a+1;p*=t,n&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+m*a,p,x,t.ashearX,t.ashearY)}apply2(t,e,s,i,r,n,a,h,l){let c=t.ax,d=t.ay,u=t.ascaleX,m=t.ascaleY,g=u,f=m,p=e.ascaleX,x=0,w=0,b=0;u<0?(u=-u,x=180,b=-1):(x=0,b=1),m<0&&(m=-m,b=-b),p<0?(p=-p,w=180):w=0;let y=e.ax,v=0,A=0,S=0,I=t.a,C=t.b,T=t.c,M=t.d,k=Math.abs(u-m)<=1e-4;!k||n?(v=0,A=I*y+t.worldX,S=T*y+t.worldY):(v=e.ay,A=I*y+C*v+t.worldX,S=T*y+M*v+t.worldY);let E=t.parent;if(!E)throw new Error("IK parent must itself have a parent.");I=E.a,C=E.b,T=E.c,M=E.d;let Y,F,R=1/(I*M-C*T),X=A-E.worldX,L=S-E.worldY,B=(X*M-L*C)*R-c,P=(L*I-X*T)*R-d,V=Math.sqrt(B*B+P*P),D=e.data.length*p;if(V<1e-4)return this.apply1(t,s,i,!1,n,!1,l),void e.updateWorldTransformWith(y,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);X=s-E.worldX,L=i-E.worldY;let O=(X*M-L*C)*R-c,N=(L*I-X*T)*R-d,U=O*O+N*N;if(0!=h){h*=u*(p+1)*.5;let t=Math.sqrt(U),e=t-V-D*u+h;if(e>0){let s=Math.min(1,e/(2*h))-1;s=(e-h*(1-s*s))/t,O-=s*O,N-=s*N,U=O*O+N*N}}t:if(k){D*=u;let t=(U-V*V-D*D)/(2*V*D);t<-1?(t=-1,F=Math.PI*r):t>1?(t=1,F=0,n&&(I=(Math.sqrt(U)/(V+D)-1)*l+1,g*=I,a&&(f*=I))):F=Math.acos(t)*r,I=V+D*t,C=D*Math.sin(F),Y=Math.atan2(N*I-O*C,O*I+N*C)}else{I=u*D,C=m*D;let t=I*I,e=C*C,s=Math.atan2(N,O);T=e*V*V+t*U-t*e;let i=-2*e*V,n=e-t;if(M=i*i-4*n*T,M>=0){let t=Math.sqrt(M);i<0&&(t=-t),t=.5*-(i+t);let e=t/n,a=T/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=U){L=Math.sqrt(U-o*o)*r,Y=s-Math.atan2(L,o),F=Math.atan2(L/m,(o-V)/u);break t}}let a=o.PI,h=V-I,l=h*h,c=0,d=0,g=V+I,f=g*g,p=0;T=-I*V/(t-e),T>=-1&&T<=1&&(T=Math.acos(T),X=I*Math.cos(T)+V,L=C*Math.sin(T),M=X*X+L*L,M<l&&(a=T,l=M,h=X,c=L),M>f&&(d=T,f=M,g=X,p=L)),U<=.5*(l+f)?(Y=s-Math.atan2(c*r,h),F=a*r):(Y=s-Math.atan2(p*r,g),F=d*r)}let W=Math.atan2(v,y)*b,z=t.arotation;Y=(Y-W)*o.radDeg+x-z,Y>180?Y-=360:Y<-180&&(Y+=360),t.updateWorldTransformWith(c,d,z+Y*l,g,f,0,0),z=e.arotation,F=((F+W)*o.radDeg-e.ashearX)*b+w-z,F>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(y,v,z+F*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Ce=class extends be{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},Te=class extends be{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=ue.Fixed,this.spacingMode=ge.Fixed,this.rotateMode=pe.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}};(me=ue||(ue={}))[me.Fixed=0]="Fixed",me[me.Percent=1]="Percent",(fe=ge||(ge={}))[fe.Length=0]="Length",fe[fe.Fixed=1]="Fixed",fe[fe.Percent=2]="Percent",fe[fe.Proportional=3]="Proportional",(xe=pe||(pe={}))[xe.Tangent=0]="Tangent",xe[xe.Chain=1]="Chain",xe[xe.ChainScale=2]="ChainScale";var Me=class{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,i=t.bones.length;s<i;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findSlot(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof re))return;let e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;let r=this.data,n=r.rotateMode==pe.Tangent,a=r.rotateMode==pe.ChainScale,h=this.bones,l=h.length,c=n?l:l+1,d=u.setArraySize(this.spaces,c),m=a?this.lengths=u.setArraySize(this.lengths,l):[],g=this.spacing;switch(r.spacingMode){case ge.Percent:if(a)for(let t=0,e=c-1;t<e;t++){let e=h[t],s=e.data.length;if(s<Me.epsilon)m[t]=0;else{let i=s*e.a,r=s*e.c;m[t]=Math.sqrt(i*i+r*r)}}u.arrayFill(d,1,c,g);break;case ge.Proportional:let t=0;for(let e=0,s=c-1;e<s;){let s=h[e],i=s.data.length;if(i<Me.epsilon)a&&(m[e]=0),d[++e]=g;else{let r=i*s.a,n=i*s.c,o=Math.sqrt(r*r+n*n);a&&(m[e]=o),d[++e]=o,t+=o}}if(t>0){t=c/t*g;for(let e=1;e<c;e++)d[e]*=t}break;default:let e=r.spacingMode==ge.Length;for(let t=0,s=c-1;t<s;){let s=h[t],i=s.data.length;if(i<Me.epsilon)a&&(m[t]=0),d[++t]=g;else{let r=i*s.a,n=i*s.c,o=Math.sqrt(r*r+n*n);a&&(m[t]=o),d[++t]=(e?i+g:g)*o/i}}}let f=this.computeWorldPositions(t,c,n),p=f[0],x=f[1],w=r.offsetRotation,b=!1;if(0==w)b=r.rotateMode==pe.Chain;else{b=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?o.degRad:-o.degRad}for(let t=0,r=3;t<l;t++,r+=3){let l=h[t];l.worldX+=(p-l.worldX)*s,l.worldY+=(x-l.worldY)*i;let c=f[r],u=f[r+1],g=c-p,y=u-x;if(a){let s=m[t];if(0!=s){let t=(Math.sqrt(g*g+y*y)/s-1)*e+1;l.a*=t,l.c*=t}}if(p=c,x=u,e>0){let s=l.a,i=l.b,a=l.c,h=l.d,c=0,u=0,m=0;if(c=n?f[r-1]:0==d[t+1]?f[r+2]:Math.atan2(y,g),c-=Math.atan2(a,s),b){u=Math.cos(c),m=Math.sin(c);let t=l.data.length;p+=(t*(u*s-m*a)-g)*e,x+=(t*(m*s+u*a)-y)*e}else c+=w;c>o.PI?c-=o.PI2:c<-o.PI&&(c+=o.PI2),c*=e,u=Math.cos(c),m=Math.sin(c),l.a=u*s-m*a,l.b=u*i-m*h,l.c=m*s+u*a,l.d=m*i+u*h}l.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,r=this.position,n=this.spaces,a=u.setArraySize(this.positions,3*e+2),o=this.world,h=t.closed,l=t.worldVerticesLength,c=l/6,d=Me.NONE;if(!t.constantSpeed){let m=t.lengths;c-=h?1:2;let g,f=m[c];switch(this.data.positionMode==ue.Percent&&(r*=f),this.data.spacingMode){case ge.Percent:g=f;break;case ge.Proportional:g=f/e;break;default:g=1}o=u.setArraySize(this.world,8);for(let u=0,p=0,x=0;u<e;u++,p+=3){let e=n[u]*g;r+=e;let w=r;if(h)w%=f,w<0&&(w+=f),x=0;else{if(w<0){d!=Me.BEFORE&&(d=Me.BEFORE,t.computeWorldVertices(i,2,4,o,0,2)),this.addBeforePosition(w,o,0,a,p);continue}if(w>f){d!=Me.AFTER&&(d=Me.AFTER,t.computeWorldVertices(i,l-6,4,o,0,2)),this.addAfterPosition(w-f,o,0,a,p);continue}}for(;;x++){let t=m[x];if(!(w>t)){if(0==x)w/=t;else{let e=m[x-1];w=(w-e)/(t-e)}break}}x!=d&&(d=x,h&&x==c?(t.computeWorldVertices(i,l-4,4,o,0,2),t.computeWorldVertices(i,0,4,o,4,2)):t.computeWorldVertices(i,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,p,s||u>0&&0==e)}return a}h?(l+=2,o=u.setArraySize(this.world,l),t.computeWorldVertices(i,2,l-4,o,0,2),t.computeWorldVertices(i,0,2,o,l-4,2),o[l-2]=o[0],o[l-1]=o[1]):(c--,l-=4,o=u.setArraySize(this.world,l),t.computeWorldVertices(i,2,l,o,0,2));let m,g=u.setArraySize(this.curves,c),f=0,p=o[0],x=o[1],w=0,b=0,y=0,v=0,A=0,S=0,I=0,C=0,T=0,M=0,k=0,E=0,Y=0,F=0;for(let t=0,e=2;t<c;t++,e+=6)w=o[e],b=o[e+1],y=o[e+2],v=o[e+3],A=o[e+4],S=o[e+5],I=.1875*(p-2*w+y),C=.1875*(x-2*b+v),T=.09375*(3*(w-y)-p+A),M=.09375*(3*(b-v)-x+S),k=2*I+T,E=2*C+M,Y=.75*(w-p)+I+.16666667*T,F=.75*(b-x)+C+.16666667*M,f+=Math.sqrt(Y*Y+F*F),Y+=k,F+=E,k+=T,E+=M,f+=Math.sqrt(Y*Y+F*F),Y+=k,F+=E,f+=Math.sqrt(Y*Y+F*F),Y+=k+T,F+=E+M,f+=Math.sqrt(Y*Y+F*F),g[t]=f,p=A,x=S;switch(this.data.positionMode==ue.Percent&&(r*=f),this.data.spacingMode){case ge.Percent:m=f;break;case ge.Proportional:m=f/e;break;default:m=1}let R=this.segments,X=0;for(let t=0,i=0,c=0,u=0;t<e;t++,i+=3){let e=n[t]*m;r+=e;let L=r;if(h)L%=f,L<0&&(L+=f),c=0;else{if(L<0){this.addBeforePosition(L,o,0,a,i);continue}if(L>f){this.addAfterPosition(L-f,o,l-4,a,i);continue}}for(;;c++){let t=g[c];if(!(L>t)){if(0==c)L/=t;else{let e=g[c-1];L=(L-e)/(t-e)}break}}if(c!=d){d=c;let t=6*c;for(p=o[t],x=o[t+1],w=o[t+2],b=o[t+3],y=o[t+4],v=o[t+5],A=o[t+6],S=o[t+7],I=.03*(p-2*w+y),C=.03*(x-2*b+v),T=.006*(3*(w-y)-p+A),M=.006*(3*(b-v)-x+S),k=2*I+T,E=2*C+M,Y=.3*(w-p)+I+.16666667*T,F=.3*(b-x)+C+.16666667*M,X=Math.sqrt(Y*Y+F*F),R[0]=X,t=1;t<8;t++)Y+=k,F+=E,k+=T,E+=M,X+=Math.sqrt(Y*Y+F*F),R[t]=X;Y+=k,F+=E,X+=Math.sqrt(Y*Y+F*F),R[8]=X,Y+=k+T,F+=E+M,X+=Math.sqrt(Y*Y+F*F),R[9]=X,u=0}for(L*=X;;u++){let t=R[u];if(!(L>t)){if(0==u)L/=t;else{let e=R[u-1];L=u+(L-e)/(t-e)}break}}this.addCurvePosition(.1*L,p,x,w,b,y,v,A,S,a,i,s||t>0&&0==e)}return a}addBeforePosition(t,e,s,i,r){let n=e[s],a=e[s+1],o=e[s+2]-n,h=e[s+3]-a,l=Math.atan2(h,o);i[r]=n+t*Math.cos(l),i[r+1]=a+t*Math.sin(l),i[r+2]=l}addAfterPosition(t,e,s,i,r){let n=e[s+2],a=e[s+3],o=n-e[s],h=a-e[s+1],l=Math.atan2(h,o);i[r]=n+t*Math.cos(l),i[r+1]=a+t*Math.sin(l),i[r+2]=l}addCurvePosition(t,e,s,i,r,n,a,o,h,l,c,d){if(0==t||isNaN(t))return l[c]=e,l[c+1]=s,void(l[c+2]=Math.atan2(r-s,i-e));let u=t*t,m=u*t,g=1-t,f=g*g,p=f*g,x=g*t,w=3*x,b=g*w,y=w*t,v=e*p+i*b+n*y+o*m,A=s*p+r*b+a*y+h*m;l[c]=v,l[c+1]=A,d&&(l[c+2]=t<.001?Math.atan2(r-s,i-e):Math.atan2(A-(s*f+r*x*2+a*u),v-(e*f+i*x*2+n*u)))}},ke=Me;ke.NONE=-1,ke.BEFORE=-2,ke.AFTER=-3,ke.epsilon=1e-5;var Ee,Ye,Fe=class{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n,this.darkColor=t.darkColor?new n:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof y&&this.attachment instanceof y&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},Re=class{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new f,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=s,h=this.target,l=h.a,c=h.b,d=h.c,u=h.d,m=l*u-c*d>0?o.degRad:-o.degRad,g=this.data.offsetRotation*m,f=this.data.offsetShearY*m,p=this.bones;for(let m=0,x=p.length;m<x;m++){let x=p[m];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,n=Math.atan2(d,l)-Math.atan2(i,e)+g;n>o.PI?n-=o.PI2:n<-o.PI&&(n+=o.PI2),n*=t;let a=Math.cos(n),h=Math.sin(n);x.a=a*e-h*i,x.b=a*s-h*r,x.c=h*e+a*i,x.d=h*s+a*r}if(a){let t=this.temp;h.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*s}if(0!=i){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(l*l+d*d)-t+this.data.offsetScaleX)*i)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(c*c+u*u)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(n>0){let t=x.b,e=x.d,s=Math.atan2(e,t),i=Math.atan2(u,c)-Math.atan2(d,l)-(s-Math.atan2(x.c,x.a));i>o.PI?i-=o.PI2:i<-o.PI&&(i+=o.PI2),i=s+(i+f)*n;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(i)*r,x.d=Math.sin(i)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=s,h=this.target,l=h.a,c=h.b,d=h.c,u=h.d,m=l*u-c*d>0?o.degRad:-o.degRad,g=this.data.offsetRotation*m,f=this.data.offsetShearY*m,p=this.bones;for(let m=0,x=p.length;m<x;m++){let x=p[m];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,n=Math.atan2(d,l)+g;n>o.PI?n-=o.PI2:n<-o.PI&&(n+=o.PI2),n*=t;let a=Math.cos(n),h=Math.sin(n);x.a=a*e-h*i,x.b=a*s-h*r,x.c=h*e+a*i,x.d=h*s+a*r}if(a){let t=this.temp;h.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*s}if(0!=i){let t=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleX)*i+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(n>0){let t=Math.atan2(u,c)-Math.atan2(d,l);t>o.PI?t-=o.PI2:t<-o.PI&&(t+=o.PI2);let e=x.b,s=x.d;t=Math.atan2(s,e)+(t-o.PI/2+f)*n;let i=Math.sqrt(e*e+s*s);x.b=Math.cos(t)*i,x.d=Math.sin(t)*i}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let d=l.ax,u=l.ay;d+=(a.ax-d+this.data.offsetX)*e,u+=(a.ay-u+this.data.offsetY)*s;let m=l.ascaleX,g=l.ascaleY;0!=i&&0!=m&&(m=(m+(a.ascaleX-m+this.data.offsetScaleX)*i)/m),0!=r&&0!=g&&(g=(g+(a.ascaleY-g+this.data.offsetScaleY)*r)/g);let f=l.ashearY;if(0!=n){let t=a.ashearY-f+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),f+=t*n}l.updateWorldTransformWith(d,u,c,m,g,l.ashearX,f)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation+(a.arotation+this.data.offsetRotation)*t,d=l.ax+(a.ax+this.data.offsetX)*e,u=l.ay+(a.ay+this.data.offsetY)*s,m=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*i+1),g=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r+1),f=l.ashearY+(a.ashearY+this.data.offsetShearY)*n;l.updateWorldTransformWith(d,u,c,m,g,l.ashearX,f)}}},Xe=class{constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){let t=this.bones[i.parent.index];s=new we(i,this,t),t.children.push(s)}else s=new we(i,this,null);this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let s=t.slots[e],i=this.bones[s.boneData.index],r=new Fe(s,i);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let s=t.ikConstraints[e];this.ikConstraints.push(new Ie(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let s=t.transformConstraints[e];this.transformConstraints.push(new Re(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let s=t.pathConstraints[e];this.pathConstraints.push(new ke(s,this))}this.color=new n(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do{s.sorted=!1,s.active=!0,s=s.parent}while(s)}}let e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,r=e.length,n=s.length,a=i.length,o=r+n+a;t:for(let t=0;t<o;t++){for(let s=0;s<r;s++){let i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<n;e++){let i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<a;e++){let s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&u.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{let e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&u.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);let r=e.getAttachment();r instanceof re&&this.sortPathConstraintAttachmentWith(r,i);let n=t.bones,a=n.length;for(let t=0;t<a;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(n[t].children);for(let t=0;t<a;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&u.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){let s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){let i=t.attachments[e];if(i)for(let t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof re))return;let s=t.bones;if(s){let t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){let s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}let e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let s=t.a,i=t.b,r=t.c,n=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=r*this.x+n*this.y+t.worldY;let a=e.rotation+90+e.shearY,h=o.cosDeg(e.rotation+e.shearX)*e.scaleX,l=o.cosDeg(a)*e.scaleY,c=o.sinDeg(e.rotation+e.shearX)*e.scaleX,d=o.sinDeg(a)*e.scaleY;e.a=(s*h+i*c)*this.scaleX,e.b=(s*l+i*d)*this.scaleX,e.c=(r*h+n*c)*this.scaleY,e.d=(r*l+n*d)*this.scaleY;let u=this._updateCache;for(let t=0,s=u.length;t<s;t++){let s=u[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){let s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}let s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}let i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){let t=this.slots;u.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s],r=i.data.attachmentName;if(r){let e=t.getAttachment(s,r);e&&i.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let s=this.data.findSlot(t);if(!s)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let s=this.slots;for(let i=0,r=s.length;i<r;i++){let r=s[i];if(r.data.name==t){let s=null;if(e&&(s=this.getAttachment(i,e),!s))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(s)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){let t=new f,e=new f;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let i=this.drawOrder,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){let e=i[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof oe)h=8,l=u.setArraySize(s,h,0),c.computeWorldVertices(e,l,0,2);else if(c instanceof ie){let t=c;h=t.worldVerticesLength,l=u.setArraySize(s,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){let e=l[t],s=l[t+1];r=Math.min(r,e),n=Math.min(n,s),a=Math.max(a,e),o=Math.max(o,s)}}t.set(r,n),e.set(a-r,o-n)}},Le=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}},Be=class{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},Pe=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");let i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];s.attachment&&(s.attachment instanceof ie?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){let s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&delete s[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let i in s){let r=s[i];r&&t.push(new Be(e,i,r))}}return t}getAttachmentsForSlot(t,e){let s=this.attachments[t];if(s)for(let i in s){let r=s[i];r&&e.push(new Be(t,i,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){let r=t.slots[i],n=r.getAttachment();if(n&&s<e.attachments.length){let t=e.attachments[s];for(let e in t){if(n==t[e]){let t=this.getAttachment(s,e);t&&r.setAttachment(t);break}}}s++}}},Ve=class{constructor(t,e,s){if(this.index=0,this.color=new n(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Ee.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}};(Ye=Ee||(Ee={}))[Ye.Normal=0]="Normal",Ye[Ye.Additive=1]="Additive",Ye[Ye.Multiply=2]="Multiply",Ye[Ye.Screen=3]="Screen";var De,Oe,Ne=class extends be{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},Ue=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new Le;s.name="";let i=new We(t),r=i.readInt32(),a=i.readInt32();s.hash=0==a&&0==r?null:a.toString(16)+r.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();let o=i.readBoolean();o&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let h=0;h=i.readInt(!0);for(let t=0;t<h;t++){let t=i.readString();if(!t)throw new Error("String in string table must not be null.");i.strings.push(t)}h=i.readInt(!0);for(let t=0;t<h;t++){let r=i.readString();if(!r)throw new Error("Bone name must not be null.");let a=0==t?null:s.bones[i.readInt(!0)],h=new de(t,r,a);h.rotation=i.readFloat(),h.x=i.readFloat()*e,h.y=i.readFloat()*e,h.scaleX=i.readFloat(),h.scaleY=i.readFloat(),h.shearX=i.readFloat(),h.shearY=i.readFloat(),h.length=i.readFloat()*e,h.transformMode=i.readInt(!0),h.skinRequired=i.readBoolean(),o&&n.rgba8888ToColor(h.color,i.readInt32()),s.bones.push(h)}h=i.readInt(!0);for(let t=0;t<h;t++){let e=i.readString();if(!e)throw new Error("Slot name must not be null.");let r=s.bones[i.readInt(!0)],a=new Ve(t,e,r);n.rgba8888ToColor(a.color,i.readInt32());let o=i.readInt32();-1!=o&&n.rgb888ToColor(a.darkColor=new n,o),a.attachmentName=i.readStringRef(),a.blendMode=i.readInt(!0),s.slots.push(a)}h=i.readInt(!0);for(let t,r=0;r<h;r++){let r=i.readString();if(!r)throw new Error("IK constraint data name must not be null.");let n=new Ce(r);n.order=i.readInt(!0),n.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)n.bones.push(s.bones[i.readInt(!0)]);n.target=s.bones[i.readInt(!0)],n.mix=i.readFloat(),n.softness=i.readFloat()*e,n.bendDirection=i.readByte(),n.compress=i.readBoolean(),n.stretch=i.readBoolean(),n.uniform=i.readBoolean(),s.ikConstraints.push(n)}h=i.readInt(!0);for(let t,r=0;r<h;r++){let r=i.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let n=new Ne(r);n.order=i.readInt(!0),n.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)n.bones.push(s.bones[i.readInt(!0)]);n.target=s.bones[i.readInt(!0)],n.local=i.readBoolean(),n.relative=i.readBoolean(),n.offsetRotation=i.readFloat(),n.offsetX=i.readFloat()*e,n.offsetY=i.readFloat()*e,n.offsetScaleX=i.readFloat(),n.offsetScaleY=i.readFloat(),n.offsetShearY=i.readFloat(),n.mixRotate=i.readFloat(),n.mixX=i.readFloat(),n.mixY=i.readFloat(),n.mixScaleX=i.readFloat(),n.mixScaleY=i.readFloat(),n.mixShearY=i.readFloat(),s.transformConstraints.push(n)}h=i.readInt(!0);for(let t,r=0;r<h;r++){let r=i.readString();if(!r)throw new Error("Path constraint data name must not be null.");let n=new Te(r);n.order=i.readInt(!0),n.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)n.bones.push(s.bones[i.readInt(!0)]);n.target=s.slots[i.readInt(!0)],n.positionMode=i.readInt(!0),n.spacingMode=i.readInt(!0),n.rotateMode=i.readInt(!0),n.offsetRotation=i.readFloat(),n.position=i.readFloat(),n.positionMode==ue.Fixed&&(n.position*=e),n.spacing=i.readFloat(),n.spacingMode!=ge.Length&&n.spacingMode!=ge.Fixed||(n.spacing*=e),n.mixRotate=i.readFloat(),n.mixX=i.readFloat(),n.mixY=i.readFloat(),s.pathConstraints.push(n)}let l=this.readSkin(i,s,!0,o);l&&(s.defaultSkin=l,s.skins.push(l));{let t=s.skins.length;for(u.setArraySize(s.skins,h=t+i.readInt(!0));t<h;t++){let e=this.readSkin(i,s,!1,o);if(!e)throw new Error("readSkin() should not have returned null.");s.skins[t]=e}}h=this.linkedMeshes.length;for(let t=0;t<h;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,h=i.readInt(!0);for(let t=0;t<h;t++){let t=i.readStringRef();if(!t)throw new Error;let e=new Se(t);e.intValue=i.readInt(!1),e.floatValue=i.readFloat(),e.stringValue=i.readString(),e.audioPath=i.readString(),e.audioPath&&(e.volume=i.readFloat(),e.balance=i.readFloat()),s.events.push(e)}h=i.readInt(!0);for(let t=0;t<h;t++){let t=i.readString();if(!t)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(i,t,s))}return s}readSkin(t,e,s,i){let r=null,n=0;if(s){if(n=t.readInt(!0),0==n)return null;r=new Pe("default")}else{let s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");r=new Pe(s),r.bones.length=t.readInt(!0);for(let s=0,i=r.bones.length;s<i;s++)r.bones[s]=e.bones[t.readInt(!0)];for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);n=t.readInt(!0)}for(let s=0;s<n;s++){let s=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let a=this.readAttachment(t,e,r,s,n,i);a&&r.setAttachment(s,n,a)}}return r}readAttachment(t,e,s,i,r,a){let o=this.scale,h=t.readStringRef();switch(h||(h=r),t.readByte()){case De.Region:{let e=t.readStringRef(),i=t.readFloat(),r=t.readFloat(),a=t.readFloat(),l=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat(),m=t.readInt32(),g=this.readSequence(t);e||(e=h);let f=this.attachmentLoader.newRegionAttachment(s,h,e,g);return f?(f.path=e,f.x=r*o,f.y=a*o,f.scaleX=l,f.scaleY=c,f.rotation=i,f.width=d*o,f.height=u*o,n.rgba8888ToColor(f.color,m),f.sequence=g,null==g&&f.updateRegion(),f):null}case De.BoundingBox:{let e=t.readInt(!0),i=this.readVertices(t,e),r=a?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(s,h);return o?(o.worldVerticesLength=e<<1,o.vertices=i.vertices,o.bones=i.bones,a&&n.rgba8888ToColor(o.color,r),o):null}case De.Mesh:{let e=t.readStringRef(),i=t.readInt32(),r=t.readInt(!0),l=this.readFloatArray(t,r<<1,1),c=this.readShortArray(t),d=this.readVertices(t,r),u=t.readInt(!0),m=this.readSequence(t),g=[],f=0,p=0;a&&(g=this.readShortArray(t),f=t.readFloat(),p=t.readFloat()),e||(e=h);let x=this.attachmentLoader.newMeshAttachment(s,h,e,m);return x?(x.path=e,n.rgba8888ToColor(x.color,i),x.bones=d.bones,x.vertices=d.vertices,x.worldVerticesLength=r<<1,x.triangles=c,x.regionUVs=l,null==m&&x.updateRegion(),x.hullLength=u<<1,x.sequence=m,a&&(x.edges=g,x.width=f*o,x.height=p*o),x):null}case De.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),l=t.readStringRef(),c=t.readStringRef(),d=t.readBoolean(),u=this.readSequence(t),m=0,g=0;a&&(m=t.readFloat(),g=t.readFloat()),e||(e=h);let f=this.attachmentLoader.newMeshAttachment(s,h,e,u);return f?(f.path=e,n.rgba8888ToColor(f.color,r),f.sequence=u,a&&(f.width=m*o,f.height=g*o),this.linkedMeshes.push(new ze(f,l,i,c,d)),f):null}case De.Path:{let e=t.readBoolean(),i=t.readBoolean(),r=t.readInt(!0),l=this.readVertices(t,r),c=u.newArray(r/3,0);for(let e=0,s=c.length;e<s;e++)c[e]=t.readFloat()*o;let d=a?t.readInt32():0,m=this.attachmentLoader.newPathAttachment(s,h);return m?(m.closed=e,m.constantSpeed=i,m.worldVerticesLength=r<<1,m.vertices=l.vertices,m.bones=l.bones,m.lengths=c,a&&n.rgba8888ToColor(m.color,d),m):null}case De.Point:{let e=t.readFloat(),i=t.readFloat(),r=t.readFloat(),l=a?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(s,h);return c?(c.x=i*o,c.y=r*o,c.rotation=e,a&&n.rgba8888ToColor(c.color,l),c):null}case De.Clipping:{let i=t.readInt(!0),r=t.readInt(!0),o=this.readVertices(t,r),l=a?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(s,h);return c?(c.endSlot=e.slots[i],c.worldVerticesLength=r<<1,c.vertices=o.vertices,c.bones=o.bones,a&&n.rgba8888ToColor(c.color,l),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new I(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let s=this.scale,i=e<<1,r=new qe;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,i,s),r;let n=new Array,a=new Array;for(let i=0;i<e;i++){let e=t.readInt(!0);a.push(e);for(let i=0;i<e;i++)a.push(t.readInt(!0)),n.push(t.readFloat()*s),n.push(t.readFloat()*s),n.push(t.readFloat())}return r.vertices=u.toFloatArray(n),r.bones=a,r}readFloatArray(t,e,s){let i=new Array(e);if(1==s)for(let s=0;s<e;s++)i[s]=t.readFloat();else for(let r=0;r<e;r++)i[r]=t.readFloat()*s;return i}readShortArray(t){let e=t.readInt(!0),s=new Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);let i=new Array,r=this.scale;new n,new n;for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,r=t.readInt(!0);s<r;s++){let s=t.readByte(),r=t.readInt(!0),n=r-1;switch(s){case ns:{let s=new pt(r,e);for(let e=0;e<r;e++)s.setFrame(e,t.readFloat(),t.readStringRef());i.push(s);break}case as:{let s=t.readInt(!0),a=new dt(r,s,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;for(let e=0,s=0;a.setFrame(e,o,h,l,c,d),e!=n;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;switch(t.readByte()){case ps:a.setStepped(e);break;case xs:_e(t,a,s++,e,0,o,i,h,r,1),_e(t,a,s++,e,1,o,i,l,n,1),_e(t,a,s++,e,2,o,i,c,u,1),_e(t,a,s++,e,3,o,i,d,m,1)}o=i,h=r,l=n,c=u,d=m}i.push(a);break}case os:{let s=t.readInt(!0),a=new ut(r,s,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,s=0;a.setFrame(e,o,h,l,c),e!=n;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;switch(t.readByte()){case ps:a.setStepped(e);break;case xs:_e(t,a,s++,e,0,o,i,h,r,1),_e(t,a,s++,e,1,o,i,l,n,1),_e(t,a,s++,e,2,o,i,c,d,1)}o=i,h=r,l=n,c=d}i.push(a);break}case hs:{let s=t.readInt(!0),a=new gt(r,s,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255;for(let e=0,s=0;a.setFrame(e,o,h,l,c,d,u,m,g),e!=n;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;switch(t.readByte()){case ps:a.setStepped(e);break;case xs:_e(t,a,s++,e,0,o,i,h,r,1),_e(t,a,s++,e,1,o,i,l,n,1),_e(t,a,s++,e,2,o,i,c,f,1),_e(t,a,s++,e,3,o,i,d,p,1),_e(t,a,s++,e,4,o,i,u,x,1),_e(t,a,s++,e,5,o,i,m,w,1),_e(t,a,s++,e,6,o,i,g,b,1)}o=i,h=r,l=n,c=f,d=p,u=x,m=w,g=b}i.push(a);break}case ls:{let s=t.readInt(!0),a=new ft(r,s,e),o=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;for(let e=0,s=0;a.setFrame(e,o,h,l,c,d,u,m),e!=n;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case ps:a.setStepped(e);break;case xs:_e(t,a,s++,e,0,o,i,h,r,1),_e(t,a,s++,e,1,o,i,l,n,1),_e(t,a,s++,e,2,o,i,c,g,1),_e(t,a,s++,e,3,o,i,d,f,1),_e(t,a,s++,e,4,o,i,u,p,1),_e(t,a,s++,e,5,o,i,m,x,1)}o=i,h=r,l=n,c=g,d=f,u=p,m=x}i.push(a);break}case cs:{let s=new mt(r,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,i=0;s.setFrame(e,a,o),e!=n;e++){let r=t.readFloat(),n=t.readUnsignedByte()/255;switch(t.readByte()){case ps:s.setStepped(e);break;case xs:_e(t,s,i++,e,0,a,r,o,n,1)}a=r,o=n}i.push(s)}}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,n=t.readInt(!0);s<n;s++){let s=t.readByte(),n=t.readInt(!0),a=t.readInt(!0);switch(s){case Ze:i.push(Ge(t,new et(n,a,e),1));break;case Ke:i.push(je(t,new st(n,a,e),r));break;case Je:i.push(Ge(t,new it(n,a,e),r));break;case Qe:i.push(Ge(t,new rt(n,a,e),r));break;case $e:i.push(je(t,new nt(n,a,e),1));break;case ts:i.push(Ge(t,new at(n,a,e),1));break;case es:i.push(Ge(t,new ot(n,a,e),1));break;case ss:i.push(je(t,new ht(n,a,e),1));break;case is:i.push(Ge(t,new lt(n,a,e),1));break;case rs:i.push(Ge(t,new ct(n,a,e),1))}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),n=s-1,a=new At(s,t.readInt(!0),e),o=t.readFloat(),h=t.readFloat(),l=t.readFloat()*r;for(let e=0,s=0;a.setFrame(e,o,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=n;e++){let i=t.readFloat(),n=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case ps:a.setStepped(e);break;case xs:_e(t,a,s++,e,0,o,i,h,n,1),_e(t,a,s++,e,1,o,i,l,c,r)}o=i,h=n,l=c}i.push(a)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),r=s-1,n=new St(s,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat();for(let e=0,s=0;n.setFrame(e,a,o,h,l,c,d,u),e!=r;e++){let i=t.readFloat(),r=t.readFloat(),m=t.readFloat(),g=t.readFloat(),f=t.readFloat(),p=t.readFloat(),x=t.readFloat();switch(t.readByte()){case ps:n.setStepped(e);break;case xs:_e(t,n,s++,e,0,a,i,o,r,1),_e(t,n,s++,e,1,a,i,h,m,1),_e(t,n,s++,e,2,a,i,l,g,1),_e(t,n,s++,e,3,a,i,c,f,1),_e(t,n,s++,e,4,a,i,d,p,1),_e(t,n,s++,e,5,a,i,u,x,1)}a=i,o=r,h=m,l=g,c=f,d=p,u=x}i.push(n)}for(let e=0,n=t.readInt(!0);e<n;e++){let e=t.readInt(!0),n=s.pathConstraints[e];for(let s=0,a=t.readInt(!0);s<a;s++)switch(t.readByte()){case ms:i.push(Ge(t,new It(t.readInt(!0),t.readInt(!0),e),n.positionMode==ue.Fixed?r:1));break;case gs:i.push(Ge(t,new Ct(t.readInt(!0),t.readInt(!0),e),n.spacingMode==ge.Length||n.spacingMode==ge.Fixed?r:1));break;case fs:let s=new Tt(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,i=0,r=s.getFrameCount()-1;s.setFrame(e,a,o,h,l),e!=r;e++){let r=t.readFloat(),n=t.readFloat(),c=t.readFloat(),d=t.readFloat();switch(t.readByte()){case ps:s.setStepped(e);break;case xs:_e(t,s,i++,e,0,a,r,o,n,1),_e(t,s,i++,e,1,a,r,h,c,1),_e(t,s,i++,e,2,a,r,l,d,1)}a=r,o=n,h=c,l=d}i.push(s)}}for(let e=0,n=t.readInt(!0);e<n;e++){let e=s.skins[t.readInt(!0)];for(let s=0,n=t.readInt(!0);s<n;s++){let s=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("attachmentName must not be null.");let a=e.getAttachment(s,n),o=t.readByte(),h=t.readInt(!0),l=h-1;switch(o){case ds:{let e=a,n=e.bones,o=e.vertices,c=n?o.length/3*2:o.length,d=t.readInt(!0),m=new xt(h,d,s,e),g=t.readFloat();for(let e=0,s=0;;e++){let i,a=t.readInt(!0);if(0==a)i=n?u.newFloatArray(c):o;else{i=u.newFloatArray(c);let e=t.readInt(!0);if(a+=e,1==r)for(let s=e;s<a;s++)i[s]=t.readFloat();else for(let s=e;s<a;s++)i[s]=t.readFloat()*r;if(!n)for(let t=0,e=i.length;t<e;t++)i[t]+=o[t]}if(m.setFrame(e,g,i),e==l)break;let h=t.readFloat();switch(t.readByte()){case ps:m.setStepped(e);break;case xs:_e(t,m,s++,e,0,g,h,0,1,1)}g=h}i.push(m);break}case us:{let e=new kt(h,s,a);for(let s=0;s<h;s++){let i=t.readFloat(),r=t.readInt32();e.setFrame(s,i,E[15&r],r>>4,t.readFloat())}i.push(e);break}}}}}let a=t.readInt(!0);if(a>0){let e=new vt(a),r=s.slots.length;for(let s=0;s<a;s++){let i=t.readFloat(),n=t.readInt(!0),a=u.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=u.newArray(r-n,0),h=0,l=0;for(let e=0;e<n;e++){let e=t.readInt(!0);for(;h!=e;)o[l++]=h++;a[h+t.readInt(!0)]=h++}for(;h<r;)o[l++]=h++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--l]);e.setFrame(s,i,a)}i.push(e)}let o=t.readInt(!0);if(o>0){let e=new bt(o);for(let i=0;i<o;i++){let r=t.readFloat(),n=s.events[t.readInt(!0)],a=new Ae(r,n);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():n.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(i,a)}i.push(e)}let h=0;for(let t=0,e=i.length;t<e;t++)h=Math.max(h,i[t].getDuration());return new Y(e,i,h)}},We=class{constructor(t,e=new Array,s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return 128&e&&(e=this.readByte(),s|=(127&e)<<7,128&e&&(e=this.readByte(),s|=(127&e)<<14,128&e&&(e=this.readByte(),s|=(127&e)<<21,128&e&&(e=this.readByte(),s|=(127&e)<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(t),s++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},ze=class{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}},qe=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}};function Ge(t,e,s){let i=t.readFloat(),r=t.readFloat()*s;for(let n=0,a=0,o=e.getFrameCount()-1;e.setFrame(n,i,r),n!=o;n++){let o=t.readFloat(),h=t.readFloat()*s;switch(t.readByte()){case ps:e.setStepped(n);break;case xs:_e(t,e,a++,n,0,i,o,r,h,s)}i=o,r=h}return e}function je(t,e,s){let i=t.readFloat(),r=t.readFloat()*s,n=t.readFloat()*s;for(let a=0,o=0,h=e.getFrameCount()-1;e.setFrame(a,i,r,n),a!=h;a++){let h=t.readFloat(),l=t.readFloat()*s,c=t.readFloat()*s;switch(t.readByte()){case ps:e.setStepped(a);break;case xs:_e(t,e,o++,a,0,i,h,r,l,s),_e(t,e,o++,a,1,i,h,n,c,s)}i=h,r=l,n=c}return e}function _e(t,e,s,i,r,n,a,o,h,l){e.setBezier(s,i,r,n,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,a,h)}(Oe=De||(De={}))[Oe.Region=0]="Region",Oe[Oe.BoundingBox=1]="BoundingBox",Oe[Oe.Mesh=2]="Mesh",Oe[Oe.LinkedMesh=3]="LinkedMesh",Oe[Oe.Path=4]="Path",Oe[Oe.Point=5]="Point",Oe[Oe.Clipping=6]="Clipping";var He,Ze=0,Ke=1,Je=2,Qe=3,$e=4,ts=5,es=6,ss=7,is=8,rs=9,ns=0,as=1,os=2,hs=3,ls=4,cs=5,ds=0,us=1,ms=0,gs=1,fs=2,ps=1,xs=2,ws=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new g(()=>u.newFloatArray(16))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let s=this.boundingBoxes,i=this.polygons,r=this.polygonPool,n=t.slots,a=n.length;s.length=0,r.freeAll(i),i.length=0;for(let t=0;t<a;t++){let e=n[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Ht){let t=a;s.push(t);let n=r.obtain();n.length!=t.worldVerticesLength&&(n=u.newFloatArray(t.worldVerticesLength)),i.push(n),t.computeWorldVertices(e,0,t.worldVerticesLength,n,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons;for(let n=0,a=r.length;n<a;n++){let a=r[n],o=a;for(let r=0,n=a.length;r<n;r+=2){let n=o[r],a=o[r+1];t=Math.min(t,n),e=Math.min(e,a),s=Math.max(s,n),i=Math.max(i,a)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&s<=r||e<=n&&i<=n||t>=a&&s>=a||e>=o&&i>=o)return!1;let h=(i-e)/(s-t),l=h*(r-t)+e;if(l>n&&l<o)return!0;if(l=h*(a-t)+e,l>n&&l<o)return!0;let c=(n-e)/h+t;return c>r&&c<a||(c=(o-e)/h+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let s=this.polygons;for(let i=0,r=s.length;i<r;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t,r=t.length,n=r-2,a=!1;for(let t=0;t<r;t+=2){let r=i[t+1],o=i[n+1];if(r<s&&o>=s||o<s&&r>=s){let h=i[t];h+(s-r)/(o-r)*(i[n]-h)<e&&(a=!a)}n=t}return a}intersectsSegment(t,e,s,i){let r=this.polygons;for(let n=0,a=r.length;n<a;n++)if(this.intersectsSegmentPolygon(r[n],t,e,s,i))return this.boundingBoxes[n];return null}intersectsSegmentPolygon(t,e,s,i,r){let n=t,a=t.length,o=e-i,h=s-r,l=e*r-s*i,c=n[a-2],d=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],u=n[t+1],m=c*u-d*a,g=c-a,f=d-u,p=o*f-h*g,x=(l*g-o*m)/p;if((x>=c&&x<=a||x>=a&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){let t=(l*f-h*m)/p;if((t>=d&&t<=u||t>=u&&t<=d)&&(t>=s&&t<=r||t>=r&&t<=s))return!0}c=a,d=u}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},bs=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new g(()=>new Array),this.polygonIndicesPool=new g(()=>new Array)}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let t=0;t<s;t++)i[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,n=s;t<n;++t)r[t]=bs.isConcave(t,s,e,i);let n=this.triangles;for(n.length=0;s>3;){let t=s-1,a=0,o=1;for(;;){t:if(!r[a]){let n=i[t]<<1,h=i[a]<<1,l=i[o]<<1,c=e[n],d=e[n+1],u=e[h],m=e[h+1],g=e[l],f=e[l+1];for(let n=(o+1)%s;n!=t;n=(n+1)%s){if(!r[n])continue;let t=i[n]<<1,s=e[t],a=e[t+1];if(bs.positiveArea(g,f,c,d,s,a)&&bs.positiveArea(c,d,u,m,s,a)&&bs.positiveArea(u,m,g,f,s,a))break t}break}if(0==o){do{if(!r[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%s}n.push(i[(s+a-1)%s]),n.push(i[a]),n.push(i[(a+1)%s]),i.splice(a,1),r.splice(a,1),s--;let h=(s+a-1)%s,l=a==s?0:a;r[h]=bs.isConcave(h,s,e,i),r[l]=bs.isConcave(l,s,e,i)}return 3==s&&(n.push(i[2]),n.push(i[0]),n.push(i[1])),n}decompose(t,e){let s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,d=e[t+2]<<1,u=s[l],m=s[l+1],g=s[c],f=s[c+1],p=s[d],x=s[d+1],w=!1;if(o==l){let t=a.length-4,e=bs.winding(a[t],a[t+1],a[t+2],a[t+3],p,x),s=bs.winding(p,x,a[0],a[1],a[2],a[3]);e==h&&s==h&&(a.push(p),a.push(x),n.push(d),w=!0)}w||(a.length>0?(i.push(a),r.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(u),a.push(m),a.push(g),a.push(f),a.push(p),a.push(x),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(l),n.push(c),n.push(d),h=bs.winding(u,m,g,f,p,x),o=l)}a.length>0&&(i.push(a),r.push(n));for(let t=0,e=i.length;t<e;t++){if(n=r[t],0==n.length)continue;let s=n[0],o=n[n.length-1];a=i[t];let h=a.length-4,l=a[h],c=a[h+1],d=a[h+2],u=a[h+3],m=a[0],g=a[1],f=a[2],p=a[3],x=bs.winding(l,c,d,u,m,g);for(let h=0;h<e;h++){if(h==t)continue;let e=r[h];if(3!=e.length)continue;let w=e[0],b=e[1],y=e[2],v=i[h],A=v[v.length-2],S=v[v.length-1];if(w!=s||b!=o)continue;let I=bs.winding(l,c,d,u,A,S),C=bs.winding(A,S,m,g,f,p);I==x&&C==x&&(v.length=0,e.length=0,a.push(A),a.push(S),n.push(y),l=d,c=u,d=A,u=S,h=0)}}for(let t=i.length-1;t>=0;t--)a=i[t],0==a.length&&(i.splice(t,1),this.polygonPool.free(a),n=r[t],r.splice(t,1),this.polygonIndicesPool.free(n));return i}static isConcave(t,e,s,i){let r=i[(e+t-1)%e]<<1,n=i[t]<<1,a=i[(t+1)%e]<<1;return!this.positiveArea(s[r],s[r+1],s[n],s[n+1],s[a],s[a+1])}static positiveArea(t,e,s,i,r,n){return t*(n-i)+s*(e-n)+r*(i-e)>=0}static winding(t,e,s,i,r,n){let a=s-t,o=i-e;return r*o-n*a+a*e-t*o>=0?1:-1}},ys=class{constructor(){this.triangulator=new bs,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let s=e.worldVerticesLength,i=u.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);let r=this.clippingPolygon;ys.makeClockwise(r);let n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=n.length;t<e;t++){let e=n[t];ys.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,r,n,a,o){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,m=d.length,g=o?12:8,f=0;l.length=0,c.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,p=t[i],x=t[i+1],w=r[i],b=r[i+1];i=s[e+1]<<1;let y=t[i],v=t[i+1],A=r[i],S=r[i+1];i=s[e+2]<<1;let I=t[i],C=t[i+1],T=r[i],M=r[i+1];for(let t=0;t<m;t++){let e=l.length;if(!this.clip(p,x,y,v,I,C,d[t],h)){let t=u.setArraySize(l,e+3*g);t[e]=p,t[e+1]=x,t[e+2]=n.r,t[e+3]=n.g,t[e+4]=n.b,t[e+5]=n.a,o?(t[e+6]=w,t[e+7]=b,t[e+8]=a.r,t[e+9]=a.g,t[e+10]=a.b,t[e+11]=a.a,t[e+12]=y,t[e+13]=v,t[e+14]=n.r,t[e+15]=n.g,t[e+16]=n.b,t[e+17]=n.a,t[e+18]=A,t[e+19]=S,t[e+20]=a.r,t[e+21]=a.g,t[e+22]=a.b,t[e+23]=a.a,t[e+24]=I,t[e+25]=C,t[e+26]=n.r,t[e+27]=n.g,t[e+28]=n.b,t[e+29]=n.a,t[e+30]=T,t[e+31]=M,t[e+32]=a.r,t[e+33]=a.g,t[e+34]=a.b,t[e+35]=a.a):(t[e+6]=w,t[e+7]=b,t[e+8]=y,t[e+9]=v,t[e+10]=n.r,t[e+11]=n.g,t[e+12]=n.b,t[e+13]=n.a,t[e+14]=A,t[e+15]=S,t[e+16]=I,t[e+17]=C,t[e+18]=n.r,t[e+19]=n.g,t[e+20]=n.b,t[e+21]=n.a,t[e+22]=T,t[e+23]=M),e=c.length;let s=u.setArraySize(c,e+3);s[e]=f,s[e+1]=f+1,s[e+2]=f+2,f+=3;continue t}{let t=h.length;if(0==t)continue;let s=v-C,i=I-y,r=p-I,d=C-x,m=1/(s*r+i*(x-C)),k=t>>1,E=this.clipOutput,Y=u.setArraySize(l,e+k*g);for(let h=0;h<t;h+=2){let t=E[h],l=E[h+1];Y[e]=t,Y[e+1]=l,Y[e+2]=n.r,Y[e+3]=n.g,Y[e+4]=n.b,Y[e+5]=n.a;let c=t-I,u=l-C,f=(s*c+i*u)*m,p=(d*c+r*u)*m,x=1-f-p;Y[e+6]=w*f+A*p+T*x,Y[e+7]=b*f+S*p+M*x,o&&(Y[e+8]=a.r,Y[e+9]=a.g,Y[e+10]=a.b,Y[e+11]=a.a),e+=g}e=c.length;let F=u.setArraySize(c,e+3*(k-2));k--;for(let t=1;t<k;t++)F[e]=f,F[e+1]=f+t,F[e+2]=f+t+1,e+=3;f+=k+1}}}}clip(t,e,s,i,r,n,a,o){let h,l=o,c=!1;a.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(s),h.push(i),h.push(r),h.push(n),h.push(t),h.push(e),o.length=0;let d=a,u=a.length-4;for(let t=0;;t+=2){let e=d[t],s=d[t+1],i=d[t+2],r=d[t+3],n=e-i,a=s-r,m=h,g=h.length-2,f=o.length;for(let t=0;t<g;t+=2){let h=m[t],l=m[t+1],d=m[t+2],u=m[t+3],g=n*(u-r)-a*(d-i)>0;if(n*(l-r)-a*(h-i)>0){if(g){o.push(d),o.push(u);continue}let t=u-l,n=d-h,a=t*(i-e)-n*(r-s);if(Math.abs(a)>1e-6){let c=(n*(s-l)-t*(e-h))/a;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s)}else if(g){let t=u-l,n=d-h,a=t*(i-e)-n*(r-s);if(Math.abs(a)>1e-6){let c=(n*(s-l)-t*(e-h))/a;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s);o.push(d),o.push(u)}c=!0}if(f==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==u)break;let p=o;(o=h).length=0,h=p}if(l!=o){l.length=0;for(let t=0,e=o.length-2;t<e;t++)l[t]=o[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],r=0,n=0,a=0,o=0;for(let t=0,h=s-3;t<h;t+=2)r=e[t],n=e[t+1],a=e[t+2],o=e[t+3],i+=r*o-a*n;if(!(i<0))for(let t=0,i=s-2,r=s>>1;t<r;t+=2){let s=e[t],r=e[t+1],n=i-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=s,e[n+1]=r}}},vs=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new Le,i="string"==typeof t?JSON.parse(t):t,r=i.skeleton;if(r&&(s.hash=r.hash,s.version=r.spine,s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height,s.fps=r.fps,s.imagesPath=r.images),i.bones)for(let t=0;t<i.bones.length;t++){let r=i.bones[t],n=null,a=Ts(r,"parent",null);a&&(n=s.findBone(a));let o=new de(s.bones.length,r.name,n);o.length=Ts(r,"length",0)*e,o.x=Ts(r,"x",0)*e,o.y=Ts(r,"y",0)*e,o.rotation=Ts(r,"rotation",0),o.scaleX=Ts(r,"scaleX",1),o.scaleY=Ts(r,"scaleY",1),o.shearX=Ts(r,"shearX",0),o.shearY=Ts(r,"shearY",0),o.transformMode=u.enumValue(he,Ts(r,"transform","Normal")),o.skinRequired=Ts(r,"skin",!1);let h=Ts(r,"color",null);h&&o.color.setFromString(h),s.bones.push(o)}if(i.slots)for(let t=0;t<i.slots.length;t++){let e=i.slots[t],r=s.findBone(e.bone);if(!r)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let a=new Ve(s.slots.length,e.name,r),o=Ts(e,"color",null);o&&a.color.setFromString(o);let h=Ts(e,"dark",null);h&&(a.darkColor=n.fromString(h)),a.attachmentName=Ts(e,"attachment",null),a.blendMode=u.enumValue(Ee,Ts(e,"blend","normal")),s.slots.push(a)}if(i.ik)for(let t=0;t<i.ik.length;t++){let r=i.ik[t],n=new Ce(r.name);n.order=Ts(r,"order",0),n.skinRequired=Ts(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=s.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);n.bones.push(e)}let a=s.findBone(r.target);if(!a)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);n.target=a,n.mix=Ts(r,"mix",1),n.softness=Ts(r,"softness",0)*e,n.bendDirection=Ts(r,"bendPositive",!0)?1:-1,n.compress=Ts(r,"compress",!1),n.stretch=Ts(r,"stretch",!1),n.uniform=Ts(r,"uniform",!1),s.ikConstraints.push(n)}if(i.transform)for(let t=0;t<i.transform.length;t++){let r=i.transform[t],n=new Ne(r.name);n.order=Ts(r,"order",0),n.skinRequired=Ts(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);n.bones.push(i)}let a=r.target,o=s.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${r.name}.`);n.target=o,n.local=Ts(r,"local",!1),n.relative=Ts(r,"relative",!1),n.offsetRotation=Ts(r,"rotation",0),n.offsetX=Ts(r,"x",0)*e,n.offsetY=Ts(r,"y",0)*e,n.offsetScaleX=Ts(r,"scaleX",0),n.offsetScaleY=Ts(r,"scaleY",0),n.offsetShearY=Ts(r,"shearY",0),n.mixRotate=Ts(r,"mixRotate",1),n.mixX=Ts(r,"mixX",1),n.mixY=Ts(r,"mixY",n.mixX),n.mixScaleX=Ts(r,"mixScaleX",1),n.mixScaleY=Ts(r,"mixScaleY",n.mixScaleX),n.mixShearY=Ts(r,"mixShearY",1),s.transformConstraints.push(n)}if(i.path)for(let t=0;t<i.path.length;t++){let r=i.path[t],n=new Te(r.name);n.order=Ts(r,"order",0),n.skinRequired=Ts(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);n.bones.push(i)}let a=r.target,o=s.findSlot(a);if(!o)throw new Error(`Couldn't find target slot ${a} for path constraint ${r.name}.`);n.target=o,n.positionMode=u.enumValue(ue,Ts(r,"positionMode","Percent")),n.spacingMode=u.enumValue(ge,Ts(r,"spacingMode","Length")),n.rotateMode=u.enumValue(pe,Ts(r,"rotateMode","Tangent")),n.offsetRotation=Ts(r,"rotation",0),n.position=Ts(r,"position",0),n.positionMode==ue.Fixed&&(n.position*=e),n.spacing=Ts(r,"spacing",0),n.spacingMode!=ge.Length&&n.spacingMode!=ge.Fixed||(n.spacing*=e),n.mixRotate=Ts(r,"mixRotate",1),n.mixX=Ts(r,"mixX",1),n.mixY=Ts(r,"mixY",n.mixX),s.pathConstraints.push(n)}if(i.skins)for(let t=0;t<i.skins.length;t++){let e=i.skins[t],r=new Pe(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let i=e.bones[t],n=s.findBone(i);if(!n)throw new Error(`Couldn't find bone ${i} for skin ${e.name}.`);r.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let i=e.ik[t],n=s.findIkConstraint(i);if(!n)throw new Error(`Couldn't find IK constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let i=e.transform[t],n=s.findTransformConstraint(i);if(!n)throw new Error(`Couldn't find transform constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let i=e.path[t],n=s.findPathConstraint(i);if(!n)throw new Error(`Couldn't find path constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}for(let t in e.attachments){let i=s.findSlot(t);if(!i)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],r,i.index,t,s);e&&r.setAttachment(i.index,t,e)}}s.skins.push(r),"default"==r.name&&(s.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let t in i.events){let e=i.events[t],r=new Se(t);r.intValue=Ts(e,"int",0),r.floatValue=Ts(e,"float",0),r.stringValue=Ts(e,"string",""),r.audioPath=Ts(e,"audio",null),r.audioPath&&(r.volume=Ts(e,"volume",1),r.balance=Ts(e,"balance",0)),s.events.push(r)}if(i.animations)for(let t in i.animations){let e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,r){let n=this.scale;switch(i=Ts(t,"name",i),Ts(t,"type","region")){case"region":{let s=Ts(t,"path",i),r=this.readSequence(Ts(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,i,s,r);if(!a)return null;a.path=s,a.x=Ts(t,"x",0)*n,a.y=Ts(t,"y",0)*n,a.scaleX=Ts(t,"scaleX",1),a.scaleY=Ts(t,"scaleY",1),a.rotation=Ts(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=r;let o=Ts(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);let r=Ts(t,"color",null);return r&&s.color.setFromString(r),s}case"mesh":case"linkedmesh":{let r=Ts(t,"path",i),a=this.readSequence(Ts(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,i,r,a);if(!o)return null;o.path=r;let h=Ts(t,"color",null);h&&o.color.setFromString(h),o.width=Ts(t,"width",0)*n,o.height=Ts(t,"height",0)*n,o.sequence=a;let l=Ts(t,"parent",null);if(l)return this.linkedMeshes.push(new As(o,Ts(t,"skin",null),s,l,Ts(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=Ts(t,"edges",null),o.hullLength=2*Ts(t,"hull",0),o}case"path":{let s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=Ts(t,"closed",!1),s.constantSpeed=Ts(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,s,r<<1);let a=u.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*n;s.lengths=a;let o=Ts(t,"color",null);return o&&s.color.setFromString(o),s}case"point":{let s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=Ts(t,"x",0)*n,s.y=Ts(t,"y",0)*n,s.rotation=Ts(t,"rotation",0);let r=Ts(t,"color",null);return r&&s.color.setFromString(r),s}case"clipping":{let s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;let n=Ts(t,"end",null);n&&(s.endSlot=r.findSlot(n));let a=t.vertexCount;this.readVertices(t,s,a<<1);let o=Ts(t,"color",null);return o&&s.color.setFromString(o),s}}return null}readSequence(t){if(null==t)return null;let e=new I(Ts(t,"count",0));return e.start=Ts(t,"start",1),e.digits=Ts(t,"digits",0),e.setupIndex=Ts(t,"setup",0),e}readVertices(t,e,s){let i=this.scale;e.worldVerticesLength=s;let r=t.vertices;if(s==r.length){let t=u.toFloatArray(r);if(1!=i)for(let e=0,s=r.length;e<s;e++)t[e]*=i;return void(e.vertices=t)}let n=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let s=t+4*e;t<s;t+=4)a.push(r[t]),n.push(r[t+1]*i),n.push(r[t+2]*i),n.push(r[t+3])}e.bones=a,e.vertices=u.toFloatArray(n)}readAnimation(t,e,s){let i=this.scale,r=new Array;if(t.slots)for(let e in t.slots){let i=t.slots[e],a=s.findSlot(e);if(!a)throw new Error("Slot not found: "+e);let o=a.index;for(let t in i){let e=i[t];if(!e)continue;let s=e.length;if("attachment"==t){let t=new pt(s,o);for(let i=0;i<s;i++){let s=e[i];t.setFrame(i,Ts(s,"time",0),Ts(s,"name",null))}r.push(t)}else if("rgba"==t){let t=new dt(s,s<<2,o),i=e[0],a=Ts(i,"time",0),h=n.fromString(i.color);for(let s=0,r=0;;s++){t.setFrame(s,a,h.r,h.g,h.b,h.a);let o=e[s+1];if(!o){t.shrink(r);break}let l=Ts(o,"time",0),c=n.fromString(o.color),d=i.curve;d&&(r=Cs(d,t,r,s,0,a,l,h.r,c.r,1),r=Cs(d,t,r,s,1,a,l,h.g,c.g,1),r=Cs(d,t,r,s,2,a,l,h.b,c.b,1),r=Cs(d,t,r,s,3,a,l,h.a,c.a,1)),a=l,h=c,i=o}r.push(t)}else if("rgb"==t){let t=new ut(s,3*s,o),i=e[0],a=Ts(i,"time",0),h=n.fromString(i.color);for(let s=0,r=0;;s++){t.setFrame(s,a,h.r,h.g,h.b);let o=e[s+1];if(!o){t.shrink(r);break}let l=Ts(o,"time",0),c=n.fromString(o.color),d=i.curve;d&&(r=Cs(d,t,r,s,0,a,l,h.r,c.r,1),r=Cs(d,t,r,s,1,a,l,h.g,c.g,1),r=Cs(d,t,r,s,2,a,l,h.b,c.b,1)),a=l,h=c,i=o}r.push(t)}else if("alpha"==t)r.push(Ss(e,new mt(s,s,o),0,1));else if("rgba2"==t){let t=new gt(s,7*s,o),i=e[0],a=Ts(i,"time",0),h=n.fromString(i.light),l=n.fromString(i.dark);for(let s=0,r=0;;s++){t.setFrame(s,a,h.r,h.g,h.b,h.a,l.r,l.g,l.b);let o=e[s+1];if(!o){t.shrink(r);break}let c=Ts(o,"time",0),d=n.fromString(o.light),u=n.fromString(o.dark),m=i.curve;m&&(r=Cs(m,t,r,s,0,a,c,h.r,d.r,1),r=Cs(m,t,r,s,1,a,c,h.g,d.g,1),r=Cs(m,t,r,s,2,a,c,h.b,d.b,1),r=Cs(m,t,r,s,3,a,c,h.a,d.a,1),r=Cs(m,t,r,s,4,a,c,l.r,u.r,1),r=Cs(m,t,r,s,5,a,c,l.g,u.g,1),r=Cs(m,t,r,s,6,a,c,l.b,u.b,1)),a=c,h=d,l=u,i=o}r.push(t)}else if("rgb2"==t){let t=new ft(s,6*s,o),i=e[0],a=Ts(i,"time",0),h=n.fromString(i.light),l=n.fromString(i.dark);for(let s=0,r=0;;s++){t.setFrame(s,a,h.r,h.g,h.b,l.r,l.g,l.b);let o=e[s+1];if(!o){t.shrink(r);break}let c=Ts(o,"time",0),d=n.fromString(o.light),u=n.fromString(o.dark),m=i.curve;m&&(r=Cs(m,t,r,s,0,a,c,h.r,d.r,1),r=Cs(m,t,r,s,1,a,c,h.g,d.g,1),r=Cs(m,t,r,s,2,a,c,h.b,d.b,1),r=Cs(m,t,r,s,3,a,c,l.r,u.r,1),r=Cs(m,t,r,s,4,a,c,l.g,u.g,1),r=Cs(m,t,r,s,5,a,c,l.b,u.b,1)),a=c,h=d,l=u,i=o}r.push(t)}}}if(t.bones)for(let e in t.bones){let n=t.bones[e],a=s.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in n){let e=n[t],s=e.length;if(0!=s)if("rotate"===t)r.push(Ss(e,new et(s,s,o),0,1));else if("translate"===t){let t=new st(s,s<<1,o);r.push(Is(e,t,"x","y",0,i))}else if("translatex"===t){let t=new it(s,s,o);r.push(Ss(e,t,0,i))}else if("translatey"===t){let t=new rt(s,s,o);r.push(Ss(e,t,0,i))}else if("scale"===t){let t=new nt(s,s<<1,o);r.push(Is(e,t,"x","y",1,1))}else if("scalex"===t){let t=new at(s,s,o);r.push(Ss(e,t,1,1))}else if("scaley"===t){let t=new ot(s,s,o);r.push(Ss(e,t,1,1))}else if("shear"===t){let t=new ht(s,s<<1,o);r.push(Is(e,t,"x","y",0,1))}else if("shearx"===t){let t=new lt(s,s,o);r.push(Ss(e,t,0,1))}else if("sheary"===t){let t=new ct(s,s,o);r.push(Ss(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=n[0];if(!a)continue;let o=s.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let h=s.ikConstraints.indexOf(o),l=new At(n.length,n.length<<1,h),c=Ts(a,"time",0),d=Ts(a,"mix",1),u=Ts(a,"softness",0)*i;for(let t=0,e=0;;t++){l.setFrame(t,c,d,u,Ts(a,"bendPositive",!0)?1:-1,Ts(a,"compress",!1),Ts(a,"stretch",!1));let s=n[t+1];if(!s){l.shrink(e);break}let r=Ts(s,"time",0),o=Ts(s,"mix",1),h=Ts(s,"softness",0)*i,m=a.curve;m&&(e=Cs(m,l,e,t,0,c,r,d,o,1),e=Cs(m,l,e,t,1,c,r,u,h,i)),c=r,d=o,u=h,a=s}r.push(l)}if(t.transform)for(let e in t.transform){let i=t.transform[e],n=i[0];if(!n)continue;let a=s.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=s.transformConstraints.indexOf(a),h=new St(i.length,6*i.length,o),l=Ts(n,"time",0),c=Ts(n,"mixRotate",1),d=Ts(n,"mixX",1),u=Ts(n,"mixY",d),m=Ts(n,"mixScaleX",1),g=Ts(n,"mixScaleY",m),f=Ts(n,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,d,u,m,g,f);let s=i[t+1];if(!s){h.shrink(e);break}let r=Ts(s,"time",0),a=Ts(s,"mixRotate",1),o=Ts(s,"mixX",1),p=Ts(s,"mixY",o),x=Ts(s,"mixScaleX",1),w=Ts(s,"mixScaleY",x),b=Ts(s,"mixShearY",1),y=n.curve;y&&(e=Cs(y,h,e,t,0,l,r,c,a,1),e=Cs(y,h,e,t,1,l,r,d,o,1),e=Cs(y,h,e,t,2,l,r,u,p,1),e=Cs(y,h,e,t,3,l,r,m,x,1),e=Cs(y,h,e,t,4,l,r,g,w,1),e=Cs(y,h,e,t,5,l,r,f,b,1)),l=r,c=a,d=o,u=p,m=x,g=w,m=x,n=s}r.push(h)}if(t.path)for(let e in t.path){let n=t.path[e],a=s.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=s.pathConstraints.indexOf(a);for(let t in n){let e=n[t],s=e[0];if(!s)continue;let h=e.length;if("position"===t){let t=new It(h,h,o);r.push(Ss(e,t,0,a.positionMode==ue.Fixed?i:1))}else if("spacing"===t){let t=new Ct(h,h,o);r.push(Ss(e,t,0,a.spacingMode==ge.Length||a.spacingMode==ge.Fixed?i:1))}else if("mix"===t){let t=new Tt(h,3*h,o),i=Ts(s,"time",0),n=Ts(s,"mixRotate",1),a=Ts(s,"mixX",1),l=Ts(s,"mixY",a);for(let r=0,o=0;;r++){t.setFrame(r,i,n,a,l);let h=e[r+1];if(!h){t.shrink(o);break}let c=Ts(h,"time",0),d=Ts(h,"mixRotate",1),u=Ts(h,"mixX",1),m=Ts(h,"mixY",u),g=s.curve;g&&(o=Cs(g,t,o,r,0,i,c,n,d,1),o=Cs(g,t,o,r,1,i,c,a,u,1),o=Cs(g,t,o,r,2,i,c,l,m,1)),i=c,n=d,a=u,l=m,s=h}r.push(t)}}}if(t.attachments)for(let e in t.attachments){let n=t.attachments[e],a=s.findSkin(e);if(!a)throw new Error("Skin not found: "+e);for(let t in n){let e=n[t],o=s.findSlot(t);if(!o)throw new Error("Slot not found: "+t);let h=o.index;for(let t in e){let s=e[t],n=a.getAttachment(h,t);for(let t in s){let e=s[t],a=e[0];if(a)if("deform"==t){let t=n.bones,s=n.vertices,o=t?s.length/3*2:s.length,l=new xt(e.length,e.length,h,n),c=Ts(a,"time",0);for(let r=0,n=0;;r++){let h,d=Ts(a,"vertices",null);if(d){h=u.newFloatArray(o);let e=Ts(a,"offset",0);if(u.arrayCopy(d,0,h,e,d.length),1!=i)for(let t=e,s=t+d.length;t<s;t++)h[t]*=i;if(!t)for(let t=0;t<o;t++)h[t]+=s[t]}else h=t?u.newFloatArray(o):s;l.setFrame(r,c,h);let m=e[r+1];if(!m){l.shrink(n);break}let g=Ts(m,"time",0),f=a.curve;f&&(n=Cs(f,l,n,r,0,c,g,0,1,1)),c=g,a=m}r.push(l)}else if("sequence"==t){let t=new kt(e.length,h,n),s=0;for(let i=0;i<e.length;i++){let r=Ts(a,"delay",s),n=Ts(a,"time",0),o=v[Ts(a,"mode","hold")],h=Ts(a,"index",0);t.setFrame(i,n,o,h,r),s=r,a=e[i+1]}r.push(t)}}}}}if(t.drawOrder){let e=new vt(t.drawOrder.length),i=s.slots.length,n=0;for(let r=0;r<t.drawOrder.length;r++,n++){let a=t.drawOrder[r],o=null,h=Ts(a,"offsets",null);if(h){o=u.newArray(i,-1);let t=u.newArray(i-h.length,0),e=0,r=0;for(let i=0;i<h.length;i++){let n=h[i],a=s.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let l=a.index;for(;e!=l;)t[r++]=e++;o[e+n.offset]=e++}for(;e<i;)t[r++]=e++;for(let e=i-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(n,Ts(a,"time",0),o)}r.push(e)}if(t.events){let e=new bt(t.events.length),i=0;for(let r=0;r<t.events.length;r++,i++){let n=t.events[r],a=s.findEvent(n.name);if(!a)throw new Error("Event not found: "+n.name);let o=new Ae(u.toSinglePrecision(Ts(n,"time",0)),a);o.intValue=Ts(n,"int",a.intValue),o.floatValue=Ts(n,"float",a.floatValue),o.stringValue=Ts(n,"string",a.stringValue),o.data.audioPath&&(o.volume=Ts(n,"volume",1),o.balance=Ts(n,"balance",0)),e.setFrame(i,o)}r.push(e)}let a=0;for(let t=0,e=r.length;t<e;t++)a=Math.max(a,r[t].getDuration());s.animations.push(new Y(e,r,a))}},As=class{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}};function Ss(t,e,s,i){let r=t[0],n=Ts(r,"time",0),a=Ts(r,"value",s)*i,o=0;for(let h=0;;h++){e.setFrame(h,n,a);let l=t[h+1];if(!l)return e.shrink(o),e;let c=Ts(l,"time",0),d=Ts(l,"value",s)*i;r.curve&&(o=Cs(r.curve,e,o,h,0,n,c,a,d,i)),n=c,a=d,r=l}}function Is(t,e,s,i,r,n){let a=t[0],o=Ts(a,"time",0),h=Ts(a,s,r)*n,l=Ts(a,i,r)*n,c=0;for(let d=0;;d++){e.setFrame(d,o,h,l);let u=t[d+1];if(!u)return e.shrink(c),e;let m=Ts(u,"time",0),g=Ts(u,s,r)*n,f=Ts(u,i,r)*n,p=a.curve;p&&(c=Cs(p,e,c,d,0,o,m,h,g,n),c=Cs(p,e,c,d,1,o,m,l,f,n)),o=m,h=g,l=f,a=u}}function Cs(t,e,s,i,r,n,a,o,h,l){if("stepped"==t)return e.setStepped(i),s;let c=r<<2,d=t[c],u=t[c+1]*l,m=t[c+2],g=t[c+3]*l;return e.setBezier(s,i,r,n,o,d,u,m,g,a,h),s+1}function Ts(t,e,s){return e in t?t[e]:s}void 0===Math.fround&&(Math.fround=(He=new Float32Array(1),function(t){return He[0]=t,He[0]}));var Ms=class{constructor(t,e={alpha:"true"}){if(this.restorables=new Array,t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let s=t;this.gl=s.getContext("webgl2",e)||s.getContext("webgl",e),this.canvas=s,s.addEventListener("webglcontextlost",t=>{t&&t.preventDefault()}),s.addEventListener("webglcontextrestored",t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()})}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}},ks=771,Es=class{static getDestGLBlendMode(t){switch(t){case Ee.Normal:return ks;case Ee.Additive:return 1;case Ee.Multiply:case Ee.Screen:return ks;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,e=!1){switch(t){case Ee.Normal:case Ee.Additive:return e?1:770;case Ee.Multiply:return 774;case Ee.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case Ee.Normal:case Ee.Additive:return 1;case Ee.Multiply:return ks;case Ee.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}},Ys=class extends Kt{constructor(t,e,s=!1){super(e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=t instanceof Ms?t:new Ms(t),this.useMipMaps=s,this.restore(),this.context.addRestorable(this)}setFilters(t,e){let s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,Ys.validateMagFilter(e))}static validateMagFilter(t){switch(t){case Bt.MipMap:case Bt.MipMapLinearLinear:case Bt.MipMapLinearNearest:case Bt.MipMapNearestLinear:case Bt.MipMapNearestNearest:return Bt.Linear;default:return t}}setWraps(t,e){let s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),Ys.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}},Fs=Ys;Fs.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;var Rs=class extends ye{constructor(t,e="",s=new ve){super(e=>new Fs(t,e),e,s)}},Xs=class{constructor(t=0,e=0,s=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=s}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,s){return this.x=t,this.y=e,this.z=s,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[Ls]+this.y*e[Bs]+this.z*e[Ps]+e[Vs],this.x*e[Ds]+this.y*e[Os]+this.z*e[Ns]+e[Us],this.x*e[Ws]+this.y*e[zs]+this.z*e[qs]+e[Gs])}project(t){let e=t.values,s=1/(this.x*e[js]+this.y*e[_s]+this.z*e[Hs]+e[Zs]);return this.set((this.x*e[Ls]+this.y*e[Bs]+this.z*e[Ps]+e[Vs])*s,(this.x*e[Ds]+this.y*e[Os]+this.z*e[Ns]+e[Us])*s,(this.x*e[Ws]+this.y*e[zs]+this.z*e[qs]+e[Gs])*s)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+s*s+i*i)}},Ls=0,Bs=4,Ps=8,Vs=12,Ds=1,Os=5,Ns=9,Us=13,Ws=2,zs=6,qs=10,Gs=14,js=3,_s=7,Hs=11,Zs=15,Ks=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[Ls]=1,t[Os]=1,t[qs]=1,t[Zs]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[Ls]=e[Ls],t[Bs]=e[Ds],t[Ps]=e[Ws],t[Vs]=e[js],t[Ds]=e[Bs],t[Os]=e[Os],t[Ns]=e[zs],t[Us]=e[_s],t[Ws]=e[Ps],t[zs]=e[Ns],t[qs]=e[qs],t[Gs]=e[Hs],t[js]=e[Vs],t[_s]=e[Us],t[Hs]=e[Gs],t[Zs]=e[Zs],this.set(t)}identity(){let t=this.values;return t[Ls]=1,t[Bs]=0,t[Ps]=0,t[Vs]=0,t[Ds]=0,t[Os]=1,t[Ns]=0,t[Us]=0,t[Ws]=0,t[zs]=0,t[qs]=1,t[Gs]=0,t[js]=0,t[_s]=0,t[Hs]=0,t[Zs]=1,this}invert(){let t=this.values,e=this.temp,s=t[js]*t[zs]*t[Ns]*t[Vs]-t[Ws]*t[_s]*t[Ns]*t[Vs]-t[js]*t[Os]*t[qs]*t[Vs]+t[Ds]*t[_s]*t[qs]*t[Vs]+t[Ws]*t[Os]*t[Hs]*t[Vs]-t[Ds]*t[zs]*t[Hs]*t[Vs]-t[js]*t[zs]*t[Ps]*t[Us]+t[Ws]*t[_s]*t[Ps]*t[Us]+t[js]*t[Bs]*t[qs]*t[Us]-t[Ls]*t[_s]*t[qs]*t[Us]-t[Ws]*t[Bs]*t[Hs]*t[Us]+t[Ls]*t[zs]*t[Hs]*t[Us]+t[js]*t[Os]*t[Ps]*t[Gs]-t[Ds]*t[_s]*t[Ps]*t[Gs]-t[js]*t[Bs]*t[Ns]*t[Gs]+t[Ls]*t[_s]*t[Ns]*t[Gs]+t[Ds]*t[Bs]*t[Hs]*t[Gs]-t[Ls]*t[Os]*t[Hs]*t[Gs]-t[Ws]*t[Os]*t[Ps]*t[Zs]+t[Ds]*t[zs]*t[Ps]*t[Zs]+t[Ws]*t[Bs]*t[Ns]*t[Zs]-t[Ls]*t[zs]*t[Ns]*t[Zs]-t[Ds]*t[Bs]*t[qs]*t[Zs]+t[Ls]*t[Os]*t[qs]*t[Zs];if(0==s)throw new Error("non-invertible matrix");let i=1/s;return e[Ls]=t[Ns]*t[Gs]*t[_s]-t[Us]*t[qs]*t[_s]+t[Us]*t[zs]*t[Hs]-t[Os]*t[Gs]*t[Hs]-t[Ns]*t[zs]*t[Zs]+t[Os]*t[qs]*t[Zs],e[Bs]=t[Vs]*t[qs]*t[_s]-t[Ps]*t[Gs]*t[_s]-t[Vs]*t[zs]*t[Hs]+t[Bs]*t[Gs]*t[Hs]+t[Ps]*t[zs]*t[Zs]-t[Bs]*t[qs]*t[Zs],e[Ps]=t[Ps]*t[Us]*t[_s]-t[Vs]*t[Ns]*t[_s]+t[Vs]*t[Os]*t[Hs]-t[Bs]*t[Us]*t[Hs]-t[Ps]*t[Os]*t[Zs]+t[Bs]*t[Ns]*t[Zs],e[Vs]=t[Vs]*t[Ns]*t[zs]-t[Ps]*t[Us]*t[zs]-t[Vs]*t[Os]*t[qs]+t[Bs]*t[Us]*t[qs]+t[Ps]*t[Os]*t[Gs]-t[Bs]*t[Ns]*t[Gs],e[Ds]=t[Us]*t[qs]*t[js]-t[Ns]*t[Gs]*t[js]-t[Us]*t[Ws]*t[Hs]+t[Ds]*t[Gs]*t[Hs]+t[Ns]*t[Ws]*t[Zs]-t[Ds]*t[qs]*t[Zs],e[Os]=t[Ps]*t[Gs]*t[js]-t[Vs]*t[qs]*t[js]+t[Vs]*t[Ws]*t[Hs]-t[Ls]*t[Gs]*t[Hs]-t[Ps]*t[Ws]*t[Zs]+t[Ls]*t[qs]*t[Zs],e[Ns]=t[Vs]*t[Ns]*t[js]-t[Ps]*t[Us]*t[js]-t[Vs]*t[Ds]*t[Hs]+t[Ls]*t[Us]*t[Hs]+t[Ps]*t[Ds]*t[Zs]-t[Ls]*t[Ns]*t[Zs],e[Us]=t[Ps]*t[Us]*t[Ws]-t[Vs]*t[Ns]*t[Ws]+t[Vs]*t[Ds]*t[qs]-t[Ls]*t[Us]*t[qs]-t[Ps]*t[Ds]*t[Gs]+t[Ls]*t[Ns]*t[Gs],e[Ws]=t[Os]*t[Gs]*t[js]-t[Us]*t[zs]*t[js]+t[Us]*t[Ws]*t[_s]-t[Ds]*t[Gs]*t[_s]-t[Os]*t[Ws]*t[Zs]+t[Ds]*t[zs]*t[Zs],e[zs]=t[Vs]*t[zs]*t[js]-t[Bs]*t[Gs]*t[js]-t[Vs]*t[Ws]*t[_s]+t[Ls]*t[Gs]*t[_s]+t[Bs]*t[Ws]*t[Zs]-t[Ls]*t[zs]*t[Zs],e[qs]=t[Bs]*t[Us]*t[js]-t[Vs]*t[Os]*t[js]+t[Vs]*t[Ds]*t[_s]-t[Ls]*t[Us]*t[_s]-t[Bs]*t[Ds]*t[Zs]+t[Ls]*t[Os]*t[Zs],e[Gs]=t[Vs]*t[Os]*t[Ws]-t[Bs]*t[Us]*t[Ws]-t[Vs]*t[Ds]*t[zs]+t[Ls]*t[Us]*t[zs]+t[Bs]*t[Ds]*t[Gs]-t[Ls]*t[Os]*t[Gs],e[js]=t[Ns]*t[zs]*t[js]-t[Os]*t[qs]*t[js]-t[Ns]*t[Ws]*t[_s]+t[Ds]*t[qs]*t[_s]+t[Os]*t[Ws]*t[Hs]-t[Ds]*t[zs]*t[Hs],e[_s]=t[Bs]*t[qs]*t[js]-t[Ps]*t[zs]*t[js]+t[Ps]*t[Ws]*t[_s]-t[Ls]*t[qs]*t[_s]-t[Bs]*t[Ws]*t[Hs]+t[Ls]*t[zs]*t[Hs],e[Hs]=t[Ps]*t[Os]*t[js]-t[Bs]*t[Ns]*t[js]-t[Ps]*t[Ds]*t[_s]+t[Ls]*t[Ns]*t[_s]+t[Bs]*t[Ds]*t[Hs]-t[Ls]*t[Os]*t[Hs],e[Zs]=t[Bs]*t[Ns]*t[Ws]-t[Ps]*t[Os]*t[Ws]+t[Ps]*t[Ds]*t[zs]-t[Ls]*t[Ns]*t[zs]-t[Bs]*t[Ds]*t[qs]+t[Ls]*t[Os]*t[qs],t[Ls]=e[Ls]*i,t[Bs]=e[Bs]*i,t[Ps]=e[Ps]*i,t[Vs]=e[Vs]*i,t[Ds]=e[Ds]*i,t[Os]=e[Os]*i,t[Ns]=e[Ns]*i,t[Us]=e[Us]*i,t[Ws]=e[Ws]*i,t[zs]=e[zs]*i,t[qs]=e[qs]*i,t[Gs]=e[Gs]*i,t[js]=e[js]*i,t[_s]=e[_s]*i,t[Hs]=e[Hs]*i,t[Zs]=e[Zs]*i,this}determinant(){let t=this.values;return t[js]*t[zs]*t[Ns]*t[Vs]-t[Ws]*t[_s]*t[Ns]*t[Vs]-t[js]*t[Os]*t[qs]*t[Vs]+t[Ds]*t[_s]*t[qs]*t[Vs]+t[Ws]*t[Os]*t[Hs]*t[Vs]-t[Ds]*t[zs]*t[Hs]*t[Vs]-t[js]*t[zs]*t[Ps]*t[Us]+t[Ws]*t[_s]*t[Ps]*t[Us]+t[js]*t[Bs]*t[qs]*t[Us]-t[Ls]*t[_s]*t[qs]*t[Us]-t[Ws]*t[Bs]*t[Hs]*t[Us]+t[Ls]*t[zs]*t[Hs]*t[Us]+t[js]*t[Os]*t[Ps]*t[Gs]-t[Ds]*t[_s]*t[Ps]*t[Gs]-t[js]*t[Bs]*t[Ns]*t[Gs]+t[Ls]*t[_s]*t[Ns]*t[Gs]+t[Ds]*t[Bs]*t[Hs]*t[Gs]-t[Ls]*t[Os]*t[Hs]*t[Gs]-t[Ws]*t[Os]*t[Ps]*t[Zs]+t[Ds]*t[zs]*t[Ps]*t[Zs]+t[Ws]*t[Bs]*t[Ns]*t[Zs]-t[Ls]*t[zs]*t[Ns]*t[Zs]-t[Ds]*t[Bs]*t[qs]*t[Zs]+t[Ls]*t[Os]*t[qs]*t[Zs]}translate(t,e,s){let i=this.values;return i[Vs]+=t,i[Us]+=e,i[Gs]+=s,this}copy(){return(new Ks).set(this.values)}projection(t,e,s,i){this.identity();let r=1/Math.tan(s*(Math.PI/180)/2),n=(e+t)/(t-e),a=2*e*t/(t-e),o=this.values;return o[Ls]=r/i,o[Ds]=0,o[Ws]=0,o[js]=0,o[Bs]=0,o[Os]=r,o[zs]=0,o[_s]=0,o[Ps]=0,o[Ns]=0,o[qs]=n,o[Hs]=-1,o[Vs]=0,o[Us]=0,o[Gs]=a,o[Zs]=0,this}ortho2d(t,e,s,i){return this.ortho(t,t+s,e,e+i,0,1)}ortho(t,e,s,i,r,n){this.identity();let a=2/(e-t),o=2/(i-s),h=-2/(n-r),l=-(e+t)/(e-t),c=-(i+s)/(i-s),d=-(n+r)/(n-r),u=this.values;return u[Ls]=a,u[Ds]=0,u[Ws]=0,u[js]=0,u[Bs]=0,u[Os]=o,u[zs]=0,u[_s]=0,u[Ps]=0,u[Ns]=0,u[qs]=h,u[Hs]=0,u[Vs]=l,u[Us]=c,u[Gs]=d,u[Zs]=1,this}multiply(t){let e=this.temp,s=this.values,i=t.values;return e[Ls]=s[Ls]*i[Ls]+s[Bs]*i[Ds]+s[Ps]*i[Ws]+s[Vs]*i[js],e[Bs]=s[Ls]*i[Bs]+s[Bs]*i[Os]+s[Ps]*i[zs]+s[Vs]*i[_s],e[Ps]=s[Ls]*i[Ps]+s[Bs]*i[Ns]+s[Ps]*i[qs]+s[Vs]*i[Hs],e[Vs]=s[Ls]*i[Vs]+s[Bs]*i[Us]+s[Ps]*i[Gs]+s[Vs]*i[Zs],e[Ds]=s[Ds]*i[Ls]+s[Os]*i[Ds]+s[Ns]*i[Ws]+s[Us]*i[js],e[Os]=s[Ds]*i[Bs]+s[Os]*i[Os]+s[Ns]*i[zs]+s[Us]*i[_s],e[Ns]=s[Ds]*i[Ps]+s[Os]*i[Ns]+s[Ns]*i[qs]+s[Us]*i[Hs],e[Us]=s[Ds]*i[Vs]+s[Os]*i[Us]+s[Ns]*i[Gs]+s[Us]*i[Zs],e[Ws]=s[Ws]*i[Ls]+s[zs]*i[Ds]+s[qs]*i[Ws]+s[Gs]*i[js],e[zs]=s[Ws]*i[Bs]+s[zs]*i[Os]+s[qs]*i[zs]+s[Gs]*i[_s],e[qs]=s[Ws]*i[Ps]+s[zs]*i[Ns]+s[qs]*i[qs]+s[Gs]*i[Hs],e[Gs]=s[Ws]*i[Vs]+s[zs]*i[Us]+s[qs]*i[Gs]+s[Gs]*i[Zs],e[js]=s[js]*i[Ls]+s[_s]*i[Ds]+s[Hs]*i[Ws]+s[Zs]*i[js],e[_s]=s[js]*i[Bs]+s[_s]*i[Os]+s[Hs]*i[zs]+s[Zs]*i[_s],e[Hs]=s[js]*i[Ps]+s[_s]*i[Ns]+s[Hs]*i[qs]+s[Zs]*i[Hs],e[Zs]=s[js]*i[Vs]+s[_s]*i[Us]+s[Hs]*i[Gs]+s[Zs]*i[Zs],this.set(this.temp)}multiplyLeft(t){let e=this.temp,s=this.values,i=t.values;return e[Ls]=i[Ls]*s[Ls]+i[Bs]*s[Ds]+i[Ps]*s[Ws]+i[Vs]*s[js],e[Bs]=i[Ls]*s[Bs]+i[Bs]*s[Os]+i[Ps]*s[zs]+i[Vs]*s[_s],e[Ps]=i[Ls]*s[Ps]+i[Bs]*s[Ns]+i[Ps]*s[qs]+i[Vs]*s[Hs],e[Vs]=i[Ls]*s[Vs]+i[Bs]*s[Us]+i[Ps]*s[Gs]+i[Vs]*s[Zs],e[Ds]=i[Ds]*s[Ls]+i[Os]*s[Ds]+i[Ns]*s[Ws]+i[Us]*s[js],e[Os]=i[Ds]*s[Bs]+i[Os]*s[Os]+i[Ns]*s[zs]+i[Us]*s[_s],e[Ns]=i[Ds]*s[Ps]+i[Os]*s[Ns]+i[Ns]*s[qs]+i[Us]*s[Hs],e[Us]=i[Ds]*s[Vs]+i[Os]*s[Us]+i[Ns]*s[Gs]+i[Us]*s[Zs],e[Ws]=i[Ws]*s[Ls]+i[zs]*s[Ds]+i[qs]*s[Ws]+i[Gs]*s[js],e[zs]=i[Ws]*s[Bs]+i[zs]*s[Os]+i[qs]*s[zs]+i[Gs]*s[_s],e[qs]=i[Ws]*s[Ps]+i[zs]*s[Ns]+i[qs]*s[qs]+i[Gs]*s[Hs],e[Gs]=i[Ws]*s[Vs]+i[zs]*s[Us]+i[qs]*s[Gs]+i[Gs]*s[Zs],e[js]=i[js]*s[Ls]+i[_s]*s[Ds]+i[Hs]*s[Ws]+i[Zs]*s[js],e[_s]=i[js]*s[Bs]+i[_s]*s[Os]+i[Hs]*s[zs]+i[Zs]*s[_s],e[Hs]=i[js]*s[Ps]+i[_s]*s[Ns]+i[Hs]*s[qs]+i[Zs]*s[Hs],e[Zs]=i[js]*s[Vs]+i[_s]*s[Us]+i[Hs]*s[Gs]+i[Zs]*s[Zs],this.set(this.temp)}lookAt(t,e,s){let i=Ks.xAxis,r=Ks.yAxis,n=Ks.zAxis;n.setFrom(e).normalize(),i.setFrom(e).normalize(),i.cross(s).normalize(),r.setFrom(i).cross(n).normalize(),this.identity();let a=this.values;return a[Ls]=i.x,a[Bs]=i.y,a[Ps]=i.z,a[Ds]=r.x,a[Os]=r.y,a[Ns]=r.z,a[Ws]=-n.x,a[zs]=-n.y,a[qs]=-n.z,Ks.tmpMatrix.identity(),Ks.tmpMatrix.values[Vs]=-t.x,Ks.tmpMatrix.values[Us]=-t.y,Ks.tmpMatrix.values[Gs]=-t.z,this.multiply(Ks.tmpMatrix),this}},Js=Ks;Js.xAxis=new Xs,Js.yAxis=new Xs,Js.zAxis=new Xs,Js.tmpMatrix=new Ks;var Qs=class{constructor(t,e){this.position=new Xs(0,0,0),this.direction=new Xs(0,0,-1),this.up=new Xs(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new Js,this.inverseProjectionView=new Js,this.projection=new Js,this.view=new Js,this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){let t=this.projection,e=this.view,s=this.projectionView,i=this.inverseProjectionView,r=this.zoom,n=this.viewportWidth,a=this.viewportHeight;t.ortho(r*(-n/2),r*(n/2),r*(-a/2),r*(a/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),s.set(t.values),s.multiply(e),i.set(s.values).invert()}screenToWorld(t,e,s){let i=t.x,r=s-t.y-1;return t.x=2*i/e-1,t.y=2*r/s-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,s){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=s*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}},$s=class{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t)}setupCallbacks(t){let e=e=>{if(e instanceof MouseEvent){let s=t.getBoundingClientRect();this.mouseX=e.clientX-s.left,this.mouseY=e.clientY-s.top,this.listeners.map(t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)})}},s=i=>{if(i instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=i.clientX-r.left,this.mouseY=i.clientY-r.top,this.buttonDown=!1,this.listeners.map(t=>{t.up&&t.up(this.mouseX,this.mouseY)}),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}};t.addEventListener("mousedown",i=>{if(i instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=i.clientX-r.left,this.mouseY=i.clientY-r.top,this.buttonDown=!0,this.listeners.map(t=>{t.down&&t.down(this.mouseX,this.mouseY)}),document.addEventListener("mousemove",e),document.addEventListener("mouseup",s)}},!0),t.addEventListener("mousemove",e,!0),t.addEventListener("mouseup",s,!0),t.addEventListener("wheel",t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map(e=>{e.wheel&&e.wheel(t.deltaY)})},!0),t.addEventListener("touchstart",e=>{if(!this.touch0||!this.touch1){let s=e.changedTouches.item(0);if(!s)return;let i=t.getBoundingClientRect(),r=s.clientX-i.left,n=s.clientY-i.top,a=new ti(s.identifier,r,n);if(this.mouseX=r,this.mouseY=n,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=a;let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map(t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)})}}else this.touch0=a,this.listeners.map(t=>{t.down&&t.down(a.x,a.y)})}e.preventDefault()},!1),t.addEventListener("touchmove",e=>{if(this.touch0){var s=e.changedTouches;let n=t.getBoundingClientRect();for(var i=0;i<s.length;i++){var r=s[i];let t=r.clientX-n.left,e=r.clientY-n.top;this.touch0.identifier===r.identifier&&(this.touch0.x=this.mouseX=t,this.touch0.y=this.mouseY=e,this.listeners.map(s=>{s.dragged&&s.dragged(t,e)})),this.touch1&&this.touch1.identifier===r.identifier&&(this.touch1.x=this.mouseX=t,this.touch1.y=this.mouseY=e)}if(this.touch0&&this.touch1){let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,s=Math.sqrt(t*t+e*e);this.listeners.map(t=>{t.zoom&&t.zoom(this.initialPinchDistance,s)})}}e.preventDefault()},!1);let i=e=>{if(this.touch0){var s=e.changedTouches;let n=t.getBoundingClientRect();for(var i=0;i<s.length;i++){var r=s[i];let t=r.clientX-n.left,e=r.clientY-n.top;if(this.touch0.identifier===r.identifier){if(this.touch0=null,this.mouseX=t,this.mouseY=e,this.listeners.map(s=>{s.up&&s.up(t,e)}),!this.touch1){this.buttonDown=!1;break}this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map(t=>{t.down&&t.down(this.touch0.x,this.touch0.y)})}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",i,!1),t.addEventListener("touchcancel",i)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}},ti=class{constructor(t,e,s){this.identifier=t,this.x=e,this.y=s}},ei=class{constructor(t,e){this.canvas=t,this.camera=e;let s=0,i=0,r=0,n=0,a=0,o=0,h=0;new $s(t).addListener({down:(t,l)=>{s=e.position.x,i=e.position.y,r=a=t,n=o=l,h=e.zoom},dragged:(h,l)=>{let c=h-r,d=l-n,u=e.screenToWorld(new Xs(0,0),t.clientWidth,t.clientHeight),m=e.screenToWorld(new Xs(c,d),t.clientWidth,t.clientHeight).sub(u);e.position.set(s-m.x,i-m.y,0),e.update(),a=h,o=l},wheel:s=>{let i=s/200*e.zoom,r=e.zoom+i;if(r>0){let i=0,n=0;if(s<0)i=a,n=o;else{let e=new Xs(t.clientWidth/2+15,t.clientHeight/2),s=a-e.x,r=t.clientHeight-1-o-e.y;i=e.x-s,n=t.clientHeight-1-e.y+r}let h=e.screenToWorld(new Xs(i,n),t.clientWidth,t.clientHeight);e.zoom=r,e.update();let l=e.screenToWorld(new Xs(i,n),t.clientWidth,t.clientHeight);e.position.add(h.sub(l)),e.update()}},zoom:(t,s)=>{let i=t/s;e.zoom=h*i},up:(t,e)=>{a=t,o=e},moved:(t,e)=>{a=t,o=e}})}},si=class{constructor(t,e,s){this.vertexShader=e,this.fragmentShader=s,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=s,this.context=t instanceof Ms?t:new Ms(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let s=this.context.gl,i=s.createShader(t);if(!i)throw new Error("Couldn't create shader.");if(s.shaderSource(i,e),s.compileShader(i),!s.getShaderParameter(i,s.COMPILE_STATUS)){let t="Couldn't compile shader: "+s.getShaderInfoLog(i);if(s.deleteShader(i),!s.isContextLost())throw new Error(t)}return i}compileProgram(t,e){let s=this.context.gl,i=s.createProgram();if(!i)throw new Error("Couldn't compile program.");if(s.attachShader(i,t),s.attachShader(i,e),s.linkProgram(i),!s.getProgramParameter(i,s.LINK_STATUS)){let t="Couldn't compile shader program: "+s.getProgramInfoLog(i);if(s.deleteProgram(i),!s.isContextLost())throw new Error(t)}return i}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,s){this.context.gl.uniform2f(this.getUniformLocation(t),e,s)}setUniform3f(t,e,s,i){this.context.gl.uniform3f(this.getUniformLocation(t),e,s,i)}setUniform4f(t,e,s,i,r){this.context.gl.uniform4f(this.getUniformLocation(t),e,s,i,r)}setUniform2x2f(t,e){let s=this.context.gl;this.tmp2x2.set(e),s.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let s=this.context.gl;this.tmp3x3.set(e),s.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let s=this.context.gl;this.tmp4x4.set(e),s.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let s=e.getUniformLocation(this.program,t);if(!s&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return s}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let s=e.getAttribLocation(this.program,t);if(-1==s&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return s}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${si.POSITION};\n\t\t\t\tattribute vec4 ${si.COLOR};\n\t\t\t\tattribute vec2 ${si.TEXCOORDS};\n\t\t\t\tuniform mat4 ${si.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${si.COLOR};\n\t\t\t\t\tv_texCoords = ${si.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${si.MVP_MATRIX} * ${si.POSITION};\n\t\t\t\t}\n\t\t\t`;return new si(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")}static newTwoColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${si.POSITION};\n\t\t\t\tattribute vec4 ${si.COLOR};\n\t\t\t\tattribute vec4 ${si.COLOR2};\n\t\t\t\tattribute vec2 ${si.TEXCOORDS};\n\t\t\t\tuniform mat4 ${si.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ${si.COLOR};\n\t\t\t\t\tv_dark = ${si.COLOR2};\n\t\t\t\t\tv_texCoords = ${si.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${si.MVP_MATRIX} * ${si.POSITION};\n\t\t\t\t}\n\t\t\t`;return new si(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")}static newColored(t){let e=`\n\t\t\t\tattribute vec4 ${si.POSITION};\n\t\t\t\tattribute vec4 ${si.COLOR};\n\t\t\t\tuniform mat4 ${si.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${si.COLOR};\n\t\t\t\t\tgl_Position = ${si.MVP_MATRIX} * ${si.POSITION};\n\t\t\t\t}\n\t\t\t`;return new si(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")}},ii=si;ii.MVP_MATRIX="u_projTrans",ii.POSITION="a_position",ii.COLOR="a_color",ii.COLOR2="a_color2",ii.TEXCOORDS="a_texCoords",ii.SAMPLER="u_texture";var ri,ni,ai=class{constructor(t,e,s,i){this.attributes=e,this.verticesBuffer=null,this.verticesLength=0,this.dirtyVertices=!1,this.indicesBuffer=null,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof Ms?t:new Ms(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(s*this.elementsPerVertex),this.indices=new Uint16Array(i),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,s,i){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?r.drawElements(e,i,r.UNSIGNED_SHORT,2*s):r.drawArrays(e,s,i),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let s=0;for(let i=0;i<this.attributes.length;i++){let r=this.attributes[i],n=t.getAttributeLocation(r.name);e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*s),s+=r.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let s=0;s<this.attributes.length;s++){let i=this.attributes[s],r=t.getAttributeLocation(i.name);e.disableVertexAttribArray(r)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}},oi=class{constructor(t,e,s){this.name=t,this.type=e,this.numElements=s}},hi=class extends oi{constructor(){super(ii.POSITION,ri.Float,2)}},li=class extends oi{constructor(){super(ii.POSITION,ri.Float,3)}},ci=class extends oi{constructor(t=0){super(ii.TEXCOORDS+(0==t?"":t),ri.Float,2)}},di=class extends oi{constructor(){super(ii.COLOR,ri.Float,4)}},ui=class extends oi{constructor(){super(ii.COLOR2,ri.Float,4)}};(ni=ri||(ri={}))[ni.Float=0]="Float";var mi,gi,fi=class{constructor(t,e=!0,s=10920){if(this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,s>10920)throw new Error("Can't have more than 10920 triangles per batch: "+s);this.context=t instanceof Ms?t:new Ms(t);let i=e?[new hi,new di,new ci,new ui]:[new hi,new di,new ci];this.mesh=new ai(t,i,s,3*s);let r=this.context.gl;this.srcColorBlend=r.SRC_ALPHA,this.srcAlphaBlend=r.ONE,this.dstBlend=r.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE)}setBlendMode(t,e,s){if((this.srcColorBlend!=t||this.srcAlphaBlend!=e||this.dstBlend!=s)&&(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing)){this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s)}}draw(t,e,s){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+s.length>this.mesh.getIndices().length)&&this.flush();let i=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let r=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<s.length;t++,e++)r[t]=s[e]+i;this.indicesLength+=s.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose()}},pi=class{constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=mi.Filled,this.color=new n(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new f,e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof Ms?t:new Ms(t),this.mesh=new ai(t,[new hi,new di],e,0);let s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,s){if(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing){this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,s,i){this.color.set(t,e,s,i)}point(t,e,s){this.check(mi.Point,1),s||(s=this.color),this.vertex(t,e,s)}line(t,e,s,i,r){this.check(mi.Line,2);this.mesh.getVertices(),this.vertexIndex;r||(r=this.color),this.vertex(t,e,r),this.vertex(s,i,r)}triangle(t,e,s,i,r,n,a,o,h,l){this.check(t?mi.Filled:mi.Line,3);this.mesh.getVertices(),this.vertexIndex;o||(o=this.color),h||(h=this.color),l||(l=this.color),t?(this.vertex(e,s,o),this.vertex(i,r,h),this.vertex(n,a,l)):(this.vertex(e,s,o),this.vertex(i,r,h),this.vertex(i,r,o),this.vertex(n,a,h),this.vertex(n,a,o),this.vertex(e,s,h))}quad(t,e,s,i,r,n,a,o,h,l,c,d,u){this.check(t?mi.Filled:mi.Line,3);this.mesh.getVertices(),this.vertexIndex;l||(l=this.color),c||(c=this.color),d||(d=this.color),u||(u=this.color),t?(this.vertex(e,s,l),this.vertex(i,r,c),this.vertex(n,a,d),this.vertex(n,a,d),this.vertex(o,h,u),this.vertex(e,s,l)):(this.vertex(e,s,l),this.vertex(i,r,c),this.vertex(i,r,c),this.vertex(n,a,d),this.vertex(n,a,d),this.vertex(o,h,u),this.vertex(o,h,u),this.vertex(e,s,l))}rect(t,e,s,i,r,n){this.quad(t,e,s,e+i,s,e+i,s+r,e,s+r,n,n,n,n)}rectLine(t,e,s,i,r,n,a){this.check(t?mi.Filled:mi.Line,8),a||(a=this.color);let o=this.tmp.set(r-s,e-i);o.normalize(),n*=.5;let h=o.x*n,l=o.y*n;t?(this.vertex(e+h,s+l,a),this.vertex(e-h,s-l,a),this.vertex(i+h,r+l,a),this.vertex(i-h,r-l,a),this.vertex(i+h,r+l,a),this.vertex(e-h,s-l,a)):(this.vertex(e+h,s+l,a),this.vertex(e-h,s-l,a),this.vertex(i+h,r+l,a),this.vertex(i-h,r-l,a),this.vertex(i+h,r+l,a),this.vertex(e+h,s+l,a),this.vertex(i-h,r-l,a),this.vertex(e-h,s-l,a))}x(t,e,s){this.line(t-s,e-s,t+s,e+s),this.line(t-s,e+s,t+s,e-s)}polygon(t,e,s,i){if(s<3)throw new Error("Polygon must contain at least 3 vertices");this.check(mi.Line,2*s),i&&(i=this.color);this.mesh.getVertices(),this.vertexIndex;s<<=1;let r=t[e<<=1],n=t[e+1],a=e+s;for(let o=e,h=e+s-2;o<h;o+=2){let e=t[o],s=t[o+1],h=0,l=0;o+2>=a?(h=r,l=n):(h=t[o+2],l=t[o+3]),this.vertex(e,s,i),this.vertex(h,l,i)}}circle(t,e,s,i,r,n=0){if(0==n&&(n=Math.max(1,6*o.cbrt(i)|0)),n<=0)throw new Error("segments must be > 0.");r||(r=this.color);let a=2*o.PI/n,h=Math.cos(a),l=Math.sin(a),c=i,d=0;if(t){this.check(mi.Filled,3*n+3),n--;for(let t=0;t<n;t++){this.vertex(e,s,r),this.vertex(e+c,s+d,r);let t=c;c=h*c-l*d,d=l*t+h*d,this.vertex(e+c,s+d,r)}this.vertex(e,s,r),this.vertex(e+c,s+d,r)}else{this.check(mi.Line,2*n+2);for(let t=0;t<n;t++){this.vertex(e+c,s+d,r);let t=c;c=h*c-l*d,d=l*t+h*d,this.vertex(e+c,s+d,r)}this.vertex(e+c,s+d,r)}c=i,d=0,this.vertex(e+c,s+d,r)}curve(t,e,s,i,r,n,a,o,h,l){this.check(mi.Line,2*h+2),l&&(l=this.color);let c=1/h,d=c*c,u=c*c*c,m=3*c,g=3*d,f=6*d,p=6*u,x=t-2*s+r,w=e-2*i+n,b=3*(s-r)-t+a,y=3*(i-n)-e+o,v=t,A=e,S=(s-t)*m+x*g+b*u,I=(i-e)*m+w*g+y*u,C=x*f+b*p,T=w*f+y*p,M=b*p,k=y*p;for(;h-- >0;)this.vertex(v,A,l),v+=S,A+=I,S+=C,I+=T,C+=M,T+=k,this.vertex(v,A,l);this.vertex(v,A,l),this.vertex(a,o,l)}vertex(t,e,s){let i=this.vertexIndex,r=this.mesh.getVertices();r[i++]=t,r[i++]=e,r[i++]=s.r,r[i++]=s.g,r[i++]=s.b,r[i++]=s.a,this.vertexIndex=i}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}};(gi=mi||(mi={}))[gi.Point=0]="Point",gi[gi.Line=1]="Line",gi[gi.Filled=4]="Filled";var xi=class{constructor(t){this.boneLineColor=new n(1,0,0,1),this.boneOriginColor=new n(0,1,0,1),this.attachmentLineColor=new n(0,0,1,.5),this.triangleLineColor=new n(1,.64,0,.5),this.pathColor=(new n).setFromString("FF7F00"),this.clipColor=new n(.8,0,0,2),this.aabbColor=new n(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new ws,this.temp=new Array,this.vertices=u.newFloatArray(2048),this.context=t instanceof Ms?t:new Ms(t)}draw(t,e,s){let i=e.x,r=e.y,n=this.context.gl,a=this.premultipliedAlpha?n.ONE:n.SRC_ALPHA;t.setBlendMode(a,n.ONE,n.ONE_MINUS_SRC_ALPHA);let o=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,i=o.length;e<i;e++){let i=o[e];if(s&&s.indexOf(i.data.name)>-1)continue;if(!i.parent)continue;let r=i.data.length*i.a+i.worldX,n=i.data.length*i.c+i.worldY;t.rectLine(!0,i.worldX,i.worldY,r,n,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(i,r,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e],r=i.getAttachment();if(r instanceof oe){let e=r,s=this.vertices;e.computeWorldVertices(i,s,0,2),t.line(s[0],s[1],s[2],s[3]),t.line(s[2],s[3],s[4],s[5]),t.line(s[4],s[5],s[6],s[7]),t.line(s[6],s[7],s[0],s[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof ie))continue;let n=r,a=this.vertices;n.computeWorldVertices(i,0,n.worldVerticesLength,a,0,2);let o=n.triangles,h=n.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,s=o.length;e<s;e+=3){let s=2*o[e],i=2*o[e+1],r=2*o[e+2];t.triangle(!1,a[s],a[s+1],a[i],a[i+1],a[r],a[r+1])}}if(this.drawMeshHull&&h>0){t.setColor(this.attachmentLineColor),h=2*(h>>1);let e=a[h-2],s=a[h-1];for(let i=0,r=h;i<r;i+=2){let r=a[i],n=a[i+1];t.line(r,n,e,s),e=r,s=n}}}}if(this.drawBoundingBoxes){let s=this.bounds;s.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,s.minX,s.minY,s.getWidth(),s.getHeight());let i=s.polygons,r=s.boundingBoxes;for(let e=0,s=i.length;e<s;e++){let s=i[e];t.setColor(r[e].color),t.polygon(s,0,s.length)}}if(this.drawPaths){let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof re))continue;let n=r,a=n.worldVerticesLength,o=this.temp=u.setArraySize(this.temp,a,0);n.computeWorldVertices(i,0,a,o,0,2);let h=this.pathColor,l=o[2],c=o[3],d=0,m=0;if(n.closed){t.setColor(h);let e=o[0],s=o[1],i=o[a-2],r=o[a-1];d=o[a-4],m=o[a-3],t.curve(l,c,e,s,i,r,d,m,32),t.setColor(xi.LIGHT_GRAY),t.line(l,c,e,s),t.line(d,m,i,r)}a-=4;for(let e=4;e<a;e+=6){let s=o[e],i=o[e+1],r=o[e+2],n=o[e+3];d=o[e+4],m=o[e+5],t.setColor(h),t.curve(l,c,s,i,r,n,d,m,32),t.setColor(xi.LIGHT_GRAY),t.line(l,c,s,i),t.line(d,m,r,n),l=d,c=m}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,i=o.length;e<i;e++){let i=o[e];s&&s.indexOf(i.data.name)>-1||t.circle(!0,i.worldX,i.worldY,3*this.scale,xi.GREEN,8)}}if(this.drawClipping){let s=e.slots;t.setColor(this.clipColor);for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof Zt))continue;let n=r,a=n.worldVerticesLength,o=this.temp=u.setArraySize(this.temp,a,0);n.computeWorldVertices(i,0,a,o,0,2);for(let e=0,s=o.length;e<s;e+=2){let s=o[e],i=o[e+1],r=o[(e+2)%o.length],n=o[(e+3)%o.length];t.line(s,i,r,n)}}}}dispose(){}},wi=xi;wi.LIGHT_GRAY=new n(192/255,192/255,192/255,1),wi.GREEN=new n(0,1,0,1);var bi=class{constructor(t,e,s){this.vertices=t,this.numVertices=e,this.numFloats=s}},yi=class{constructor(t,e=!0){this.premultipliedAlpha=!1,this.tempColor=new n,this.tempColor2=new n,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new bi([],0,0),this.clipper=new ys,this.temp=new f,this.temp2=new f,this.temp3=new n,this.temp4=new n,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=u.newFloatArray(1024*this.vertexSize)}draw(t,e,s=-1,i=-1,r,n){let a,o,h,l=this.clipper,c=this.premultipliedAlpha,d=this.twoColorTint,m=null,g=(this.temp,this.temp2,this.temp3,this.temp4,this.renderable),f=e.drawOrder,p=e.color,x=d?12:8,w=!1,b=Date.now(),y=1/n*1e3;e.sequenceActive=!1,-1==s&&(w=!0);for(let n=0,v=f.length;n<v;n++){let v=l.isClipping()?2:x,A=f[n];if(!A.bone.active){l.clipEndWithSlot(A);continue}if(s>=0&&s==A.data.index&&(w=!0),!w){l.clipEndWithSlot(A);continue}i>=0&&i==A.data.index&&(w=!1);let S,I=A.getAttachment();if(I instanceof oe){if(r&&I.sequence){let t=I.sequence.regions.length,s=Math.round(b/y);s%=t,A.sequenceIndex=s,e.sequenceActive=!0}let t=I;g.vertices=this.vertices,g.numVertices=4,g.numFloats=v<<2,t.computeWorldVertices(A,g.vertices,0,v),o=yi.QUAD_TRIANGLES,a=t.uvs,S=t.region.renderObject.page.texture,h=t.color}else{if(!(I instanceof ie)){if(I instanceof Zt){let t=I;l.clipStart(A,t);continue}l.clipEndWithSlot(A);continue}{if(r&&I.sequence){let t=I.sequence.regions.length,s=Math.round(b/y);s%=t,A.sequenceIndex=s,e.sequenceActive=!0}let t=I;g.vertices=this.vertices,g.numVertices=t.worldVerticesLength>>1,g.numFloats=g.numVertices*v,g.numFloats>g.vertices.length&&(g.vertices=this.vertices=u.newFloatArray(g.numFloats)),t.computeWorldVertices(A,0,t.worldVerticesLength,g.vertices,0,v),o=t.triangles,S=t.region.renderObject.page.texture,a=t.uvs,h=t.color}}if(S){let e=A.color,s=this.tempColor;s.r=p.r*e.r*h.r,s.g=p.g*e.g*h.g,s.b=p.b*e.b*h.b,s.a=p.a*e.a*h.a,c&&(s.r*=s.a,s.g*=s.a,s.b*=s.a);let i=this.tempColor2;A.darkColor?(c?(i.r=A.darkColor.r*s.a,i.g=A.darkColor.g*s.a,i.b=A.darkColor.b*s.a):i.setFromColor(A.darkColor),i.a=c?1:0):i.set(0,0,0,1);let r=A.data.blendMode;if(r!=m&&(m=r,t.setBlendMode(Es.getSourceColorGLBlendMode(m,c),Es.getSourceAlphaGLBlendMode(m),Es.getDestGLBlendMode(m))),l.isClipping()){l.clipTriangles(g.vertices,g.numFloats,o,o.length,a,s,i,d);let e=new Float32Array(l.clippedVertices),r=l.clippedTriangles;t.draw(S,e,r)}else{let e=g.vertices;if(d)for(let t=2,r=0,n=g.numFloats;t<n;t+=x,r+=2)e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]=s.a,e[t+4]=a[r],e[t+5]=a[r+1],e[t+6]=i.r,e[t+7]=i.g,e[t+8]=i.b,e[t+9]=i.a;else for(let t=2,i=0,r=g.numFloats;t<r;t+=x,i+=2)e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]=s.a,e[t+4]=a[i],e[t+5]=a[i+1];let r=g.vertices.subarray(0,g.numFloats);t.draw(S,r,o)}}l.clipEndWithSlot(A)}l.clipEnd()}},vi=yi;vi.QUAD_TRIANGLES=[0,1,2,2,3,0];var Ai,Si,Ii,Ci,Ti=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Mi=[0,1,2,2,3,0],ki=new n(1,1,1,1),Ei=class{constructor(t,e,s=!0){this.twoColorTint=!1,this.activeRenderer=null,this.canvas=t,this.context=e instanceof Ms?e:new Ms(e),this.twoColorTint=s,this.camera=new Qs(t.width,t.height),this.batcherShader=s?ii.newTwoColoredTextured(this.context):ii.newColoredTextured(this.context),this.batcher=new fi(this.context,s),this.shapesShader=ii.newColored(this.context),this.shapes=new pi(this.context),this.skeletonRenderer=new vi(this.context,s),this.skeletonDebugRenderer=new wi(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,s=-1,i=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,s,i)}drawSkeletonDebug(t,e=!1,s){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,s)}drawTexture(t,e,s,i,r,n){this.enableRenderer(this.batcher),n||(n=ki);var a=0;Ti[a++]=e,Ti[a++]=s,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=0,Ti[a++]=1,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e+i,Ti[a++]=s,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=1,Ti[a++]=1,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e+i,Ti[a++]=s+r,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=1,Ti[a++]=0,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e,Ti[a++]=s+r,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=0,Ti[a++]=0,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a]=0),this.batcher.draw(t,Ti,Mi)}drawTextureUV(t,e,s,i,r,n,a,o,h,l){this.enableRenderer(this.batcher),l||(l=ki);var c=0;Ti[c++]=e,Ti[c++]=s,Ti[c++]=l.r,Ti[c++]=l.g,Ti[c++]=l.b,Ti[c++]=l.a,Ti[c++]=n,Ti[c++]=a,this.twoColorTint&&(Ti[c++]=0,Ti[c++]=0,Ti[c++]=0,Ti[c++]=0),Ti[c++]=e+i,Ti[c++]=s,Ti[c++]=l.r,Ti[c++]=l.g,Ti[c++]=l.b,Ti[c++]=l.a,Ti[c++]=o,Ti[c++]=a,this.twoColorTint&&(Ti[c++]=0,Ti[c++]=0,Ti[c++]=0,Ti[c++]=0),Ti[c++]=e+i,Ti[c++]=s+r,Ti[c++]=l.r,Ti[c++]=l.g,Ti[c++]=l.b,Ti[c++]=l.a,Ti[c++]=o,Ti[c++]=h,this.twoColorTint&&(Ti[c++]=0,Ti[c++]=0,Ti[c++]=0,Ti[c++]=0),Ti[c++]=e,Ti[c++]=s+r,Ti[c++]=l.r,Ti[c++]=l.g,Ti[c++]=l.b,Ti[c++]=l.a,Ti[c++]=n,Ti[c++]=h,this.twoColorTint&&(Ti[c++]=0,Ti[c++]=0,Ti[c++]=0,Ti[c]=0),this.batcher.draw(t,Ti,Mi)}drawTextureRotated(t,e,s,i,r,n,a,h,l){this.enableRenderer(this.batcher),l||(l=ki);let c=e+n,d=s+a,u=-n,m=-a,g=i-n,f=r-a,p=u,x=m,w=u,b=f,y=g,v=f,A=g,S=m,I=0,C=0,T=0,M=0,k=0,E=0,Y=0,F=0;if(0!=h){let t=o.cosDeg(h),e=o.sinDeg(h);I=t*p-e*x,C=e*p+t*x,Y=t*w-e*b,F=e*w+t*b,k=t*y-e*v,E=e*y+t*v,T=k+(I-Y),M=E+(C-F)}else I=p,C=x,Y=w,F=b,k=y,E=v,T=A,M=S;I+=c,C+=d,T+=c,M+=d,k+=c,E+=d,Y+=c,F+=d;var R=0;Ti[R++]=I,Ti[R++]=C,Ti[R++]=l.r,Ti[R++]=l.g,Ti[R++]=l.b,Ti[R++]=l.a,Ti[R++]=0,Ti[R++]=1,this.twoColorTint&&(Ti[R++]=0,Ti[R++]=0,Ti[R++]=0,Ti[R++]=0),Ti[R++]=T,Ti[R++]=M,Ti[R++]=l.r,Ti[R++]=l.g,Ti[R++]=l.b,Ti[R++]=l.a,Ti[R++]=1,Ti[R++]=1,this.twoColorTint&&(Ti[R++]=0,Ti[R++]=0,Ti[R++]=0,Ti[R++]=0),Ti[R++]=k,Ti[R++]=E,Ti[R++]=l.r,Ti[R++]=l.g,Ti[R++]=l.b,Ti[R++]=l.a,Ti[R++]=1,Ti[R++]=0,this.twoColorTint&&(Ti[R++]=0,Ti[R++]=0,Ti[R++]=0,Ti[R++]=0),Ti[R++]=Y,Ti[R++]=F,Ti[R++]=l.r,Ti[R++]=l.g,Ti[R++]=l.b,Ti[R++]=l.a,Ti[R++]=0,Ti[R++]=0,this.twoColorTint&&(Ti[R++]=0,Ti[R++]=0,Ti[R++]=0,Ti[R]=0),this.batcher.draw(t,Ti,Mi)}drawRegion(t,e,s,i,r,n){this.enableRenderer(this.batcher),n||(n=ki);var a=0;Ti[a++]=e,Ti[a++]=s,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=t.u,Ti[a++]=t.v2,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e+i,Ti[a++]=s,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=t.u2,Ti[a++]=t.v2,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e+i,Ti[a++]=s+r,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=t.u2,Ti[a++]=t.v,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a++]=0),Ti[a++]=e,Ti[a++]=s+r,Ti[a++]=n.r,Ti[a++]=n.g,Ti[a++]=n.b,Ti[a++]=n.a,Ti[a++]=t.u,Ti[a++]=t.v,this.twoColorTint&&(Ti[a++]=0,Ti[a++]=0,Ti[a++]=0,Ti[a]=0),this.batcher.draw(t.page.texture,Ti,Mi)}line(t,e,s,i,r,n){this.enableRenderer(this.shapes),this.shapes.line(t,e,s,i,r)}triangle(t,e,s,i,r,n,a,o,h,l){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,s,i,r,n,a,o,h,l)}quad(t,e,s,i,r,n,a,o,h,l,c,d,u){this.enableRenderer(this.shapes),this.shapes.quad(t,e,s,i,r,n,a,o,h,l,c,d,u)}rect(t,e,s,i,r,n){this.enableRenderer(this.shapes),this.shapes.rect(t,e,s,i,r,n)}rectLine(t,e,s,i,r,n,a){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,s,i,r,n,a)}polygon(t,e,s,i){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,s,i)}circle(t,e,s,i,r,n=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,s,i,r,n)}curve(t,e,s,i,r,n,a,o,h,l){this.enableRenderer(this.shapes),this.shapes.curve(t,e,s,i,r,n,a,o,h,l)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var s=window.devicePixelRatio||1,i=Math.round(e.clientWidth*s),r=Math.round(e.clientHeight*s);if(e.width==i&&e.height==r||(e.width=i,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),t===Ai.Expand)this.camera.setViewport(i,r);else if(t===Ai.Fit){let t=e.width,s=e.height,i=this.camera.viewportWidth,r=this.camera.viewportHeight,n=r/i<s/t?i/t:r/s;this.camera.setViewport(t*n,s*n)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof fi?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(ii.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof pi?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(ii.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}};(Si=Ai||(Ai={}))[Si.Stretch=0]="Stretch",Si[Si.Expand=1]="Expand",Si[Si.Fit=2]="Fit";var Yi=0,Fi=163,Ri=class{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new p,this.backgroundColor=new n(.135,.135,.135,1),this.tempColor=new n,this.renderer=t,this.timeKeeper.maxDelta=9,!Ci){let t=navigator.userAgent.indexOf("Safari")>-1,e=()=>Yi++;(Ci=new Image).src=Li,t||(Ci.crossOrigin="anonymous"),Ci.onload=e,(Ii=new Image).src=Xi,t||(Ii.crossOrigin="anonymous"),Ii.onload=e}}dispose(){var t,e;null==(t=this.logo)||t.dispose(),null==(e=this.spinner)||e.dispose()}draw(t=!1){if(Yi<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));let s=this.tempColor,i=this.renderer,r=i.canvas,n=i.context.gl;if(i.resize(Ai.Expand),i.camera.position.set(r.width/2,r.height/2,0),i.batcher.setBlendMode(n.ONE,n.ONE,n.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;s.setFromColor(this.backgroundColor),e=1-this.fadeOut/1,e=1-(e-1)*(e-1),s.a*=e,s.a>0&&(i.camera.zoom=1,i.begin(),i.quad(!0,0,0,r.width,0,r.width,r.height,0,r.height,s,s,s,s),i.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(n.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),n.clear(n.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),s.set(e,e,e,e),this.logo||(this.logo=new Fs(i.context,Ci),this.spinner=new Fs(i.context,Ii)),i.camera.zoom=Math.max(1,Fi/r.height),i.begin(),i.drawTexture(this.logo,(r.width-165)/2,(r.height-108)/2,165,108,s),this.spinner&&i.drawTextureRotated(this.spinner,(r.width-Fi)/2,(r.height-Fi)/2,Fi,Fi,81.5,81.5,this.angle,s),i.end()}},Xi="data:image/png;base64,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",Li="data:image/png;base64,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",Bi=class{constructor(t,e){this.time=new p,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new Ms(t,e.webglConfig),this.renderer=new Ei(t,this.context),this.gl=this.context.gl,this.assetManager=new Rs(this.context,e.pathPrefix),this.input=new $s(t),e.app.loadAssets&&e.app.loadAssets(this);let s=()=>{requestAnimationFrame(s),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this)},i=()=>{this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),s()):requestAnimationFrame(i)};requestAnimationFrame(i)}clear(t,e,s,i){this.gl.clearColor(t,e,s,i),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}};return e})();globalThis.spine||(globalThis.spine=spine);